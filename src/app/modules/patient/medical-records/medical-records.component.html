<div class="flex flex-row container mx-auto px-4 sm:px-6 lg:px-8 items-start computed-dashboard-div">
  <div class="col-1 py-6 w-3/4">
    <header class="bg-white">
      <div>
        <h1 class="text-2xl font-medium leading-tight text-gray-900">
          Medical Records
        </h1>
      </div>
    </header>
    <div class="controls flex flex-row justify-between mt-6">
      <button type="submit" mat-raised-button color="accent"
              class="mb-6 mt-3" *ngIf="!isEditing"
              (click)="edit()"> {{ !hasMedicalRecords ? 'Add Medical Record' : 'Edit Medical Record' }}</button>
      <button type="submit" mat-raised-button color="accent"
              class="mb-6 mt-3" *ngIf="isEditing" (click)="save()"
              [disabled]="isSaving || !medicalRecordsForm.valid"> {{ isSaving ? 'Saving changes...' : 'Save changes' }} </button>
    </div>
    <div class="shadow-sm rounded border p-4">
      <!--      <p class="text-base text-gray-600"> Click the fields you want to update. </p>-->
      <form class="flex flex-col font-sans" [formGroup]="medicalRecordsForm" autocomplete="off"
            (ngSubmit)="onSubmit()">
        <h1 class="text-lg font-medium text-gray-700">
          Basic Information
        </h1>
        <div class="grid grid-cols-2 gap-2 mt-4 pt-4">
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">Age</mat-label>
              <input type="number" min="1" matInput placeholder="Age" class="pb-0 font-sans" autocomplete="off"
                     spellcheck="false" name="age" formControlName="age" required>
            </mat-form-field>
          </div>
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">Birthday</mat-label>
              <input matInput class="font-sans" [matDatepicker]="picker" placeholder="mm/dd/yyyy" required
                     name="birthday" formControlName="birthday">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">Religion</mat-label>
              <input matInput placeholder="Religion" class="pb-0 font-sans" autocomplete="off"
                     spellcheck="false" name="religion" formControlName="religion" required>
            </mat-form-field>
          </div>
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-select class="font-sans" formControlName="sex" name="sex"
                          placeholder="Sex">
                <mat-option class="font-sans" value="male">
                  Male
                </mat-option>
                <mat-option class="font-sans" value="female">
                  Female
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <h1 class="text-lg mt-4 font-medium text-gray-700 pt-2">
          Anthropometric
        </h1>
        <div class="grid grid-cols-2 gap-2 mt-4 pt-4">
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">Height (cm)</mat-label>
              <input type="number" matInput placeholder="Height (cm)" (keyup)="update()" class="pb-0 font-sans"
                     autocomplete="off"
                     spellcheck="false" name="height" formControlName="height" required>
            </mat-form-field>
          </div>
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">Weight</mat-label>
              <input type="number" matInput placeholder="Weight" (keyup)="update()" class="pb-0 font-sans"
                     autocomplete="off"
                     spellcheck="false" name="weight" formControlName="weight" required>
            </mat-form-field>
          </div>
          <div class="info flex flex-row">
            <mat-form-field appearance="outline" class="-mt-6 pb-0 flex-grow">
              <mat-label class="font-sans">BMI</mat-label>
              <input matInput placeholder="BMI" class="pb-0 font-sans" autocomplete="off"
                     spellcheck="false" name="bmi" formControlName="bmi" required>
              <mat-hint clas="font-sans">BMI is automatically computed</mat-hint>
            </mat-form-field>
          </div>
          <div class="info flex-row">
            <h1 class="text-base font-bold pl-2" *ngIf="this.bmiString"> {{ this.bmiString }}</h1>
          </div>
        </div>
        <h1 class="text-lg mt-4 font-medium text-gray-700 pt-2">
          Biochemical
        </h1>
        <div class="flex flex-col">
          <button type="button"
                  [disabled]="!isEditing || this.isUploading                                                                                                                                                           "
                  mat-raised-button class="mt-4 button w-72 flex flex-col" color="white"
                  (click)="file.click()">{{
                this.currentRecords?.biochemicalResults ? ( this.isSaving ? 'Replacing file...' : 'Replace file' ) : (this.isSaving ? 'Attaching...' : 'Attach file')
            }}
            <!--        <mat-spinner [diameter]="25z"> *ngIf="!isUploading"></mat-spinner>-->
          </button>
          <input type="file" accept=".png,.jpg,.jpeg,.pdf" #file placeholder="Choose file" multiple
                 (change)="fileChange(file.files)"
                 style="display:none;">
          <a href="{{this.currentRecords?.biochemicalResults}}" class="w-56 h-56" *ngIf="this.currentRecords?.biochemicalResults">
            <img [ngClass]="{'opacity-30': !this.isEditing || this.isSaving}" class="my-4 w-56 h-56 shadow-lg border rounded-lg object-cover"
              src="{{ this.currentRecords?.biochemicalResults ? this.currentRecords?.biochemicalResults : 'assets/default.png'}}"
              alt="" >
          </a>
        </div>
        <h1 class="text-lg mt-4 font-medium text-gray-700 pt-2">
          Clinical
        </h1>
        <div class="grid grid-cols-2 gap-2  mt-2">
          <div class="flex flex-row">
            <mat-form-field appearance="outline" class="flex-grow">
              <mat-label class="font-sans">Complaints</mat-label>
              <textarea class="font-sans" rows="9" matInput formControlName="complaints" name="complaints"></textarea>
            </mat-form-field>
          </div>
          <div class="flex flex-row">
            <mat-form-field appearance="outline" class="flex-grow">
              <mat-label class="font-sans">Current Medications</mat-label>
              <textarea class="font-sans" matInput formControlName="currentMedications"
                        name="currentMedications" rows="9"></textarea>
            </mat-form-field>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div routerLink="/patient/account-settings"
       class="col-2 w-1/4 p-6 border rounded shadow-sm m-6 cursor-pointer hover:shadow-md outline-none">
    <app-user-card></app-user-card>
  </div>
</div>


<!--<div class="flex flex-row container mx-auto px-4 sm:px-6 lg:px-8 items-start computed-dashboard-div">-->
<!--  <div class="col-1 py-6 w-3/4">-->
<!--    <header class="bg-white">-->
<!--      <div>-->
<!--        <h1 class="text-2xl font-medium leading-tight text-gray-900">-->
<!--          Medical Records-->
<!--        </h1>-->
<!--      </div>-->
<!--    </header>-->
<!--    <div class="controls flex flex-row justify-between mt-6">-->
<!--      <button type="submit" mat-raised-button color="accent" class="mb-6 mt-3" > Upload New Medical Record</button>-->
<!--      <mat-form-field appearance="outline" class="mt-2">-->
<!--        <mat-label>Search</mat-label>-->
<!--        <input matInput placeholder="Placeholder">-->
<!--      </mat-form-field>-->
<!--    </div>-->
<!--    <div class="shadow-sm rounded border">-->
<!--        <table mat-table [dataSource]="dataSource" class="w-full">-->
<!--          &lt;!&ndash; Name Column &ndash;&gt;-->
<!--          <ng-container matColumnDef="filename">-->
<!--            <th mat-header-cell *matHeaderCellDef> Filename </th>-->
<!--            <td mat-cell *matCellDef="let element"> {{element.filename}} </td>-->
<!--          </ng-container>-->

<!--          &lt;!&ndash; Weight Column &ndash;&gt;-->
<!--          <ng-container matColumnDef="dateUploaded">-->
<!--            <th mat-header-cell *matHeaderCellDef> Date Uploaded </th>-->
<!--            <td mat-cell *matCellDef="let element"> {{element.dateUploaded}} </td>-->
<!--          </ng-container>-->

<!--          &lt;!&ndash; Weight Column &ndash;&gt;-->
<!--          <ng-container matColumnDef="download">-->
<!--            <th mat-header-cell> Preview/Download</th>-->
<!--            <td mat-cell> Download </td>-->
<!--          </ng-container>-->

<!--          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
<!--          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->
<!--        </table>-->

<!--        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons [pageSize]="5"></mat-paginator>-->
<!--      </div>-->
<!--  </div>-->
<!--  <div class="col-2 w-1/4 p-6 border rounded shadow-sm m-6">-->
<!--    <app-user-card></app-user-card>-->
<!--  </div>-->
<!--</div>-->
