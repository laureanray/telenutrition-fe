(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{h2TG:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientModule",function(){return Se});var i=n("ofXK"),o=n("lFam"),a=n("fXoL"),s=n("0IaG"),r=n("6CRC"),c=n("tyNb");const l=function(t){return{hidden:t}};let b=(()=>{class t{constructor(t,e){this.dialog=t,this.authService=e,this.isProfileDropdownShown=!1,this.patient=this.authService.currentUserValue}ngOnInit(){}showProfileDropdown(){this.isProfileDropdownShown=!0}hideProfileDropdown(){this.isProfileDropdownShown=!1}toggleProfileDropdown(){this.isProfileDropdownShown=!this.isProfileDropdownShown}showLogoutModal(){this.dialog.open(o.a,{width:"450px"})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.b),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-patient"]],decls:79,vars:4,consts:[[1,"bg-gray-100"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","justify-between","h-16"],[1,"flex","items-center"],["href","#",1,"flex","items-center","link-text-bd","text-gray-800"],[1,"sr-only"],[1,"pl-2","text-lg","text-green-900"],[1,"hidden","md:block"],[1,"ml-10","flex","items-baseline","space-x-4"],["routerLink","/patient",1,"text-base","text-gray-900","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/appointments",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/messages",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/account-settings",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/support",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/nutrition-tools",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],[1,"ml-4","flex","items-center","md:ml-6"],[1,"ml-3","relative"],["id","user-menu","aria-haspopup","true",1,"max-w-xs","bg-gray-800","rounded-full","flex","items-center","text-sm","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white","object-cover",3,"click"],["alt","",1,"h-8","w-8","rounded-full","object-cover",3,"src"],["role","menu","aria-orientation","vertical","aria-labelledby","user-menu",1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","ring-1","ring-black","ring-opacity-5",3,"ngClass"],["routerLink","/patient/account-settings","role","menuitem",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["role","menuitem",1,"cursor-pointer","block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"-mr-2","flex","md:hidden"],[1,"bg-gray-800","inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-400","hover:text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"hidden","md:hidden"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3"],["href","#",1,"bg-gray-900","text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],["href","#",1,"text-gray-300","hover:bg-gray-700","hover:text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],[1,"pt-4","pb-3","border-t","border-gray-700"],[1,"flex","items-center","px-5"],[1,"flex-shrink-0"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-10","w-10","rounded-full"],[1,"ml-3"],[1,"text-base","font-medium","leading-none","text-white"],[1,"text-sm","font-medium","leading-none","text-gray-400"],[1,"ml-auto","bg-gray-800","flex-shrink-0","p-1","rounded-full","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"mt-3","px-2","space-y-1"],["href","#",1,"block","px-3","py-2","rounded-md","text-base","font-medium","text-gray-400","hover:text-white","hover:bg-gray-700"]],template:function(t,e){1&t&&(a.Tb(0,"nav",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Tb(4,"a",4),a.Tb(5,"span",5),a.Bc(6,"Workflow"),a.Sb(),a.Tb(7,"h1",6),a.Bc(8," TeleNutrition.ph "),a.Sb(),a.Sb(),a.Tb(9,"div",7),a.Tb(10,"div",8),a.Tb(11,"a",9),a.Bc(12,"Dashboard"),a.Sb(),a.Tb(13,"a",10),a.Bc(14,"Appointments"),a.Sb(),a.Tb(15,"a",11),a.Bc(16,"Messages"),a.Sb(),a.Tb(17,"a",12),a.Bc(18,"Settings"),a.Sb(),a.Tb(19,"a",13),a.Bc(20,"Support"),a.Sb(),a.Tb(21,"a",14),a.Bc(22,"Nutrition Tools"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(23,"div",7),a.Tb(24,"div",15),a.Tb(25,"div",16),a.Tb(26,"div"),a.Tb(27,"button",17),a.ac("click",function(){return e.toggleProfileDropdown()}),a.Tb(28,"span",5),a.Bc(29,"Open user menu"),a.Sb(),a.Ob(30,"img",18),a.Sb(),a.Sb(),a.Tb(31,"div",19),a.Tb(32,"a",20),a.Bc(33,"Your Profile"),a.Sb(),a.Tb(34,"a",21),a.ac("click",function(){return e.showLogoutModal()}),a.Bc(35,"Sign out"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(36,"div",22),a.Tb(37,"button",23),a.Tb(38,"span",5),a.Bc(39,"Open main menu"),a.Sb(),a.dc(),a.Tb(40,"svg",24),a.Ob(41,"path",25),a.Sb(),a.Tb(42,"svg",26),a.Ob(43,"path",27),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.cc(),a.Tb(44,"div",28),a.Tb(45,"div",29),a.Tb(46,"a",30),a.Bc(47,"Dashboard"),a.Sb(),a.Tb(48,"a",31),a.Bc(49,"Team"),a.Sb(),a.Tb(50,"a",31),a.Bc(51,"Projects"),a.Sb(),a.Tb(52,"a",31),a.Bc(53,"Calendar"),a.Sb(),a.Tb(54,"a",31),a.Bc(55,"Reports"),a.Sb(),a.Sb(),a.Tb(56,"div",32),a.Tb(57,"div",33),a.Tb(58,"div",34),a.Ob(59,"img",35),a.Sb(),a.Tb(60,"div",36),a.Tb(61,"div",37),a.Bc(62,"Tom Cook"),a.Sb(),a.Tb(63,"div",38),a.Bc(64,"tom@example.com"),a.Sb(),a.Sb(),a.Tb(65,"button",39),a.Tb(66,"span",5),a.Bc(67,"View notifications"),a.Sb(),a.dc(),a.Tb(68,"svg",40),a.Ob(69,"path",41),a.Sb(),a.Sb(),a.Sb(),a.cc(),a.Tb(70,"div",42),a.Tb(71,"a",43),a.Bc(72,"Your Profile"),a.Sb(),a.Tb(73,"a",43),a.Bc(74,"Settings"),a.Sb(),a.Tb(75,"a",43),a.Bc(76,"Sign out"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(77,"main"),a.Ob(78,"router-outlet"),a.Sb()),2&t&&(a.Bb(30),a.kc("src",e.patient.profileImageURL?e.patient.profileImageURL:"assets/default.png",a.sc),a.Bb(1),a.jc("ngClass",a.mc(2,l,!e.isProfileDropdownShown)))},directives:[c.e,i.i,c.g],styles:[""]}),t})();var d=n("dNgK"),m=n("wd7m");function p(t,e){if(1&t&&(a.Tb(0,"div",11),a.Tb(1,"p",2),a.Bc(2," Sex: "),a.Tb(3,"strong"),a.Bc(4),a.Sb(),a.Sb(),a.Tb(5,"p",2),a.Bc(6," Age: "),a.Tb(7,"strong"),a.Bc(8),a.Sb(),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(4),a.Dc(" ",null==t.patient||null==t.patient.medicalRecord||null==t.patient.medicalRecord.sex?null:t.patient.medicalRecord.sex.toUpperCase().charAt(0)," "),a.Bb(4),a.Dc(" ",null==t.patient||null==t.patient.medicalRecord?null:t.patient.medicalRecord.age," years old")}}function u(t,e){1&t&&(a.Tb(0,"p",2),a.Bc(1," Please complete medical records. "),a.Sb())}let h=(()=>{class t{constructor(t,e){this.authService=t,this.patientService=e,this.patientS=this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{this.patient=t,console.log(this.patient.medicalRecord)})}ngOnInit(){}ngOnDestroy(){this.patientS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(m.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-user-card"]],decls:19,vars:5,consts:[["alt","",1,"rounded-full","mx-auto","w-72","h-72","border-2","rounded-lg","object-cover",3,"src"],[1,"text-xl","font-medium","text-gray-700","text-center","pt-4"],[1,"text-base","text-gray-600","text-center"],["class","flex flex-row py-4 justify-around",4,"ngIf","ngIfElse"],["elseBlk",""],[1,"flex","flex-row","py-4"],[1,"text-base","font-bold","text-gray-700"],["href","",1,"text-base","font-medium","ml-auto"],[1,"history"],[1,"px-4","py-2","bg-gray-200","shadow-sm","rounded-md","cursor-pointer","hover:shadow-md","hover:bg-gray-50","transition-all"],[1,"text-md","font-medium"],[1,"flex","flex-row","py-4","justify-around"]],template:function(t,e){if(1&t&&(a.Ob(0,"img",0),a.Tb(1,"h1",1),a.Bc(2),a.Sb(),a.Tb(3,"p",2),a.Bc(4," Patient "),a.Sb(),a.zc(5,p,9,2,"div",3),a.zc(6,u,2,0,"ng-template",null,4,a.Ac),a.Tb(8,"div",5),a.Tb(9,"h1",6),a.Bc(10," History "),a.Sb(),a.Tb(11,"a",7),a.Bc(12," See all "),a.Sb(),a.Sb(),a.Tb(13,"div",8),a.Tb(14,"div",9),a.Tb(15,"h1",10),a.Bc(16," Consultation "),a.Sb(),a.Tb(17,"p"),a.Bc(18," 01/01/2020"),a.Sb(),a.Sb(),a.Sb()),2&t){const t=a.pc(7);a.kc("src",null!=e.patient&&e.patient.profileImageURL?null==e.patient?null:e.patient.profileImageURL:"assets/default.png",a.sc),a.Bb(2),a.Ec(" ",null==e.patient?null:e.patient.firstName," ",null==e.patient?null:e.patient.lastName," "),a.Bb(3),a.jc("ngIf",null==e.patient?null:e.patient.medicalRecord)("ngIfElse",t)}},directives:[i.k],styles:[""]}),t})(),f=(()=>{class t{constructor(t,e,n,i){this.authService=t,this.snackBar=e,this.patientService=n,this.router=i,this.authS=this.authService.currentUser.subscribe(t=>{(null==t?void 0:t.username)&&(this.patientS=this.patientService.getPatient(t.username).subscribe(t=>{this.patient=t,this.patient.medicalRecord||this.snackBar.open("Please complete your medical records","Okay go now. ",{duration:1e4}).onAction().subscribe(t=>{this.router.navigate(["/patient","medical-records"])})}))})}ngOnInit(){}ngOnDestroy(){this.patientS.unsubscribe(),this.authS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(d.a),a.Nb(m.a),a.Nb(c.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-dashboard"]],decls:32,vars:1,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"text-5xl","font-light","mt-8"],[1,"font-normal"],[1,"flex","flex-row"],[1,"grid","grid-cols-2","gap-6","mt-8","h-0","w-2/4"],["routerLink","/patient/medical-records",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/notes.png","alt","",1,"w-1/3","mx-auto"],[1,"text-lg","font-medium","text-gray-800","text-center","pt-4"],["routerLink","/patient/appointments",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/history.png","alt","",1,"w-1/3","mx-auto"],["routerLink","/patient/book-an-appointment",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/calendar.png","alt","",1,"w-1/3","mx-auto"],["routerLink","/patient/nutrition-tools",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/pyramid.png","alt","",1,"w-1/3","mx-auto"],[1,"graphics"],["src","assets/graphics-2.png","alt","",1,"pl-10","w-10/12"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Dashboard "),a.Sb(),a.Tb(6,"h1",4),a.Bc(7," Hello, "),a.Tb(8,"span",5),a.Bc(9),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(10,"div",6),a.Tb(11,"div",7),a.Tb(12,"a",8),a.Ob(13,"img",9),a.Tb(14,"h1",10),a.Bc(15," Medical Records "),a.Sb(),a.Sb(),a.Tb(16,"a",11),a.Ob(17,"img",12),a.Tb(18,"h1",10),a.Bc(19," History "),a.Sb(),a.Sb(),a.Tb(20,"a",13),a.Ob(21,"img",14),a.Tb(22,"h1",10),a.Bc(23," Book an Appointment "),a.Sb(),a.Sb(),a.Tb(24,"a",15),a.Ob(25,"img",16),a.Tb(26,"h1",10),a.Bc(27," Nutrition Tools "),a.Sb(),a.Sb(),a.Sb(),a.Tb(28,"div",17),a.Ob(29,"img",18),a.Sb(),a.Sb(),a.Sb(),a.Tb(30,"div",19),a.Ob(31,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(9),a.Dc(" ",null==e.patient?null:e.patient.firstName,"! "))},directives:[c.e,c.d,h],styles:[""]}),t})();var g=n("3Pt+"),S=n("tk/3"),T=n("AytR"),v=n("7Cbv"),B=n("wd/R"),x=n("sINK"),y=n("kmnG"),w=n("qFsG"),C=n("iadO"),R=n("d3UM"),k=n("FKr1"),M=n("bTqV");function D(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",44),a.ac("click",function(){return a.rc(t),a.ec().edit()}),a.Bc(1),a.Sb()}if(2&t){const t=a.ec();a.Bb(1),a.Dc(" ",t.hasMedicalRecords?"Edit Medical Record":"Add Medical Record","")}}function N(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",45),a.ac("click",function(){return a.rc(t),a.ec().save()}),a.Bc(1),a.Sb()}if(2&t){const t=a.ec();a.jc("disabled",t.isSaving||!t.medicalRecordsForm.valid),a.Bb(1),a.Dc(" ",t.isSaving?"Saving changes...":"Save changes"," ")}}function O(t,e){if(1&t&&(a.Tb(0,"h1",46),a.Bc(1),a.Sb()),2&t){const t=a.ec();a.Bb(1),a.Dc(" ",t.bmiString,"")}}const j=function(t){return{"opacity-30":t}};function A(t,e){if(1&t&&(a.Tb(0,"a",47),a.Ob(1,"img",48),a.Sb()),2&t){const t=a.ec();a.kc("href",null==t.currentRecords?null:t.currentRecords.biochemicalResults,a.sc),a.Bb(1),a.kc("src",null!=t.currentRecords&&t.currentRecords.biochemicalResults?null==t.currentRecords?null:t.currentRecords.biochemicalResults:"assets/default.png",a.sc),a.jc("ngClass",a.mc(3,j,!t.isEditing||t.isSaving))}}let I=(()=>{class t{constructor(t,e,n,i,o){this.authService=t,this.fb=e,this.fileService=n,this.snackBar=i,this.patientService=o,this.isEditing=!1,this.isSaving=!1,this.isUploading=!1,this.filesToUpload=[],this.uploadedFilePaths=[],this.bmiString="",this.hasMedicalRecords=!1,this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{this.patient=t,this.patient.medicalRecord&&(this.hasMedicalRecords=!0,this.currentRecords=this.patient.medicalRecord,console.log("current records",this.currentRecords),this.initFormData()),console.log(this.patient)}),this.medicalRecordsForm=this.fb.group({age:new g.f({value:"",disabled:!0},g.x.required),birthday:new g.f({value:"",disabled:!0},g.x.required),religion:new g.f({value:"",disabled:!0},g.x.required),sex:new g.f({value:"",disabled:!0},g.x.required),height:new g.f({value:"",disabled:!0},g.x.required),weight:new g.f({value:"",disabled:!0},g.x.required),bmi:new g.f({value:"",disabled:!0},g.x.required),biochemicalResults:new g.f({value:"",disabled:!0},g.x.required),complaints:new g.f({value:"",disabled:!0},g.x.required),currentMedications:new g.f({value:"",disabled:!0},g.x.required)}),this.medicalRecordsForm.valueChanges.subscribe(t=>{console.log(t)})}initFormData(){this.medicalRecordsForm.patchValue({age:this.currentRecords.age,birthday:new Date(this.currentRecords.birthday),religion:this.currentRecords.religion,sex:this.currentRecords.sex,height:this.currentRecords.height,weight:this.currentRecords.weight,bmi:this.currentRecords.bmi,biochemicalResults:this.currentRecords.biochemicalResults,complaints:this.currentRecords.complaints,currentMedications:this.currentRecords.currentMedications})}ngOnInit(){window.onbeforeunload=()=>{confirm("u sure?")}}onSubmit(){}edit(){this.isEditing=!0,this.enable(),console.log(this.medicalRecordsForm.valid,this.medicalRecordsForm.value)}fileChange(t){if(this.isUploading=!0,0===t.length)return;const e=t[0],n=new FormData;n.append("file",e,v.a()+"."+e.type.split("/")[1]),setTimeout(()=>{this.fileService.upload(n).subscribe(t=>{if(t.type===S.d.UploadProgress);else if(t.type===S.d.Response){const e=`${T.a.apiUrl}/file/files/${t.body.path}`;this.medicalRecordsForm.patchValue({biochemicalResults:e}),this.isUploading=!1,this.snackBar.open("Uploaded!",null,{duration:2e3}),this.currentRecords={biochemicalResults:e}}},t=>{this.isUploading=!1,this.snackBar.open("Unexpected error occurred!",null,{duration:2e3})})},1e3)}enable(){this.medicalRecordsForm.get("age").enable(),this.medicalRecordsForm.get("birthday").enable(),this.medicalRecordsForm.get("religion").enable(),this.medicalRecordsForm.get("sex").enable(),this.medicalRecordsForm.get("height").enable(),this.medicalRecordsForm.get("weight").enable(),this.medicalRecordsForm.get("biochemicalResults").enable(),this.medicalRecordsForm.get("complaints").enable(),this.medicalRecordsForm.get("currentMedications").enable()}disable(){this.medicalRecordsForm.get("age").disable(),this.medicalRecordsForm.get("birthday").disable(),this.medicalRecordsForm.get("religion").disable(),this.medicalRecordsForm.get("sex").disable(),this.medicalRecordsForm.get("height").disable(),this.medicalRecordsForm.get("weight").disable(),this.medicalRecordsForm.get("biochemicalResults").disable(),this.medicalRecordsForm.get("complaints").disable(),this.medicalRecordsForm.get("currentMedications").disable()}update(){if(this.medicalRecordsForm.value.weight>0&&this.medicalRecordsForm.value.height>0){let t=parseInt(this.medicalRecordsForm.value.weight)/Math.pow(.01*this.medicalRecordsForm.value.height,2);t=Math.round(100*t)/100,this.medicalRecordsForm.patchValue({bmi:t}),t?t<17.5?this.bmiString="Underweight":t>=17.5&&t<=22.99?this.bmiString="Normal":t>=23&&t<=27.99?this.bmiString="Over weight":t>=28&&(this.bmiString="Obese"):this.bmiString=""}else console.log(this.medicalRecordsForm.value)}save(){this.disable(),this.isSaving=!0;const t={id:this.currentRecords.id?this.currentRecords.id:0,age:this.medicalRecordsForm.controls.age.value,birthday:B(this.medicalRecordsForm.controls.birthday.value).toISOString(),religion:this.medicalRecordsForm.controls.religion.value,sex:this.medicalRecordsForm.controls.sex.value,height:this.medicalRecordsForm.controls.height.value,weight:this.medicalRecordsForm.controls.weight.value,bmi:this.medicalRecordsForm.controls.bmi.value,biochemicalResults:this.medicalRecordsForm.controls.biochemicalResults.value,complaints:this.medicalRecordsForm.controls.complaints.value,currentMedications:this.medicalRecordsForm.controls.currentMedications.value};this.patient.medicalRecord=t,this.patient.roles=void 0,console.log(t),setTimeout(()=>{this.patientService.updateMedicalRecords(this.patient).subscribe(t=>{this.patient=t,this.snackBar.open("Success!",null,{duration:2e3}),this.currentRecords=t.medicalRecord,this.isSaving=!1,this.isEditing=!1},t=>{this.snackBar.open("Unexpected Error Occured!",null,{duration:2e3}),console.log(t)})},600)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(g.e),a.Nb(x.a),a.Nb(d.a),a.Nb(m.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-medical-records"]],decls:84,vars:9,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"controls","flex","flex-row","justify-between","mt-6"],["type","submit","mat-raised-button","","color","accent","class","mb-6 mt-3",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","class","mb-6 mt-3",3,"disabled","click",4,"ngIf"],[1,"shadow-sm","rounded","border","p-4"],["autocomplete","off",1,"flex","flex-col","font-sans",3,"formGroup","ngSubmit"],[1,"text-lg","font-medium","text-gray-700"],[1,"grid","grid-cols-2","gap-2","mt-4","pt-4"],[1,"info","flex","flex-row"],["appearance","outline",1,"-mt-6","pb-0","flex-grow","text-base"],[1,"font-sans"],["type","number","min","1","matInput","","placeholder","Age","autocomplete","off","spellcheck","false","name","age","formControlName","age","required","",1,"pb-0","font-sans"],["matInput","","placeholder","mm/dd/yyyy","required","","name","birthday","formControlName","birthday",1,"font-sans",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","placeholder","Religion","autocomplete","off","spellcheck","false","name","religion","formControlName","religion","required","",1,"pb-0","font-sans"],["formControlName","sex","name","sex","placeholder","Sex",1,"font-sans"],["value","male",1,"font-sans"],["value","female",1,"font-sans"],[1,"text-lg","font-medium","text-gray-700","-mt-2"],["type","number","matInput","","placeholder","Height (cm)","autocomplete","off","np","","spellcheck","false","name","height","formControlName","height","required","",1,"pb-0","font-sans",3,"keyup"],["type","number","matInput","","placeholder","Weight","autocomplete","off","spellcheck","false","name","weight","formControlName","weight","required","",1,"pb-0","font-sans",3,"keyup"],["appearance","outline",1,"-mt-6","pb-0","flex-grow"],["matInput","","placeholder","BMI","autocomplete","off","spellcheck","false","name","bmi","formControlName","bmi","required","",1,"pb-0","font-sans","text-base"],["clas","font-sans"],[1,"info","flex-row"],["class","text-base font-bold pl-2",4,"ngIf"],[1,"text-lg","mt-4","font-medium","text-gray-700"],[1,"flex","flex-col"],["type","button","mat-raised-button","","color","white",1,"mt-4","button","w-72","flex","flex-col",3,"disabled","click"],["type","file","accept",".png,.jpg,.jpeg,.pdf","placeholder","Choose file","multiple","",2,"display","none",3,"change"],["file",""],["class","w-56 h-56",3,"href",4,"ngIf"],[1,"text-lg","mt-4","font-medium","text-gray-700","pt-2"],[1,"grid","grid-cols-2","gap-2","mt-2"],[1,"flex","flex-row"],["appearance","outline",1,"flex-grow"],[1,"font-sans","text-base"],["rows","9","matInput","","formControlName","complaints","name","complaints",1,"font-sans","text-base"],["matInput","","formControlName","currentMedications","name","currentMedications","rows","9",1,"font-sans","text-base"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],["type","submit","mat-raised-button","","color","accent",1,"mb-6","mt-3",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"mb-6","mt-3",3,"disabled","click"],[1,"text-base","font-bold","pl-2"],[1,"w-56","h-56",3,"href"],["alt","",1,"my-4","w-56","h-56","shadow-lg","border","rounded-lg","object-cover",3,"ngClass","src"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Medical Records "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.zc(7,D,2,1,"button",5),a.zc(8,N,2,2,"button",6),a.Sb(),a.Tb(9,"div",7),a.Tb(10,"form",8),a.ac("ngSubmit",function(){return e.onSubmit()}),a.Tb(11,"h1",9),a.Bc(12," Basic Information "),a.Sb(),a.Tb(13,"div",10),a.Tb(14,"div",11),a.Tb(15,"mat-form-field",12),a.Tb(16,"mat-label",13),a.Bc(17,"Age"),a.Sb(),a.Ob(18,"input",14),a.Sb(),a.Sb(),a.Tb(19,"div",11),a.Tb(20,"mat-form-field",12),a.Tb(21,"mat-label",13),a.Bc(22,"Birthday"),a.Sb(),a.Ob(23,"input",15),a.Ob(24,"mat-datepicker-toggle",16),a.Ob(25,"mat-datepicker",null,17),a.Sb(),a.Sb(),a.Tb(27,"div",11),a.Tb(28,"mat-form-field",12),a.Tb(29,"mat-label",13),a.Bc(30,"Religion"),a.Sb(),a.Ob(31,"input",18),a.Sb(),a.Sb(),a.Tb(32,"div",11),a.Tb(33,"mat-form-field",12),a.Tb(34,"mat-select",19),a.Tb(35,"mat-option",20),a.Bc(36," Male "),a.Sb(),a.Tb(37,"mat-option",21),a.Bc(38," Female "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(39,"h1",22),a.Bc(40," Anthropometric "),a.Sb(),a.Tb(41,"div",10),a.Tb(42,"div",11),a.Tb(43,"mat-form-field",12),a.Tb(44,"mat-label",13),a.Bc(45,"Height (cm)"),a.Sb(),a.Tb(46,"input",23),a.ac("keyup",function(){return e.update()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(47,"div",11),a.Tb(48,"mat-form-field",12),a.Tb(49,"mat-label",13),a.Bc(50,"Weight"),a.Sb(),a.Tb(51,"input",24),a.ac("keyup",function(){return e.update()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(52,"div",11),a.Tb(53,"mat-form-field",25),a.Tb(54,"mat-label",13),a.Bc(55,"BMI"),a.Sb(),a.Ob(56,"input",26),a.Tb(57,"mat-hint",27),a.Bc(58,"BMI is automatically computed"),a.Sb(),a.Sb(),a.Sb(),a.Tb(59,"div",28),a.zc(60,O,2,1,"h1",29),a.Sb(),a.Sb(),a.Tb(61,"h1",30),a.Bc(62," Biochemical "),a.Sb(),a.Tb(63,"div",31),a.Tb(64,"button",32),a.ac("click",function(){return a.rc(t),a.pc(67).click()}),a.Bc(65),a.Sb(),a.Tb(66,"input",33,34),a.ac("change",function(){a.rc(t);const n=a.pc(67);return e.fileChange(n.files)}),a.Sb(),a.zc(68,A,2,5,"a",35),a.Sb(),a.Tb(69,"h1",36),a.Bc(70," Clinical "),a.Sb(),a.Tb(71,"div",37),a.Tb(72,"div",38),a.Tb(73,"mat-form-field",39),a.Tb(74,"mat-label",40),a.Bc(75,"Complaints"),a.Sb(),a.Ob(76,"textarea",41),a.Sb(),a.Sb(),a.Tb(77,"div",38),a.Tb(78,"mat-form-field",39),a.Tb(79,"mat-label",40),a.Bc(80,"Current Medications"),a.Sb(),a.Ob(81,"textarea",42),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(82,"div",43),a.Ob(83,"app-user-card"),a.Sb(),a.Sb()}if(2&t){const t=a.pc(26);a.Bb(7),a.jc("ngIf",!e.isEditing),a.Bb(1),a.jc("ngIf",e.isEditing),a.Bb(2),a.jc("formGroup",e.medicalRecordsForm),a.Bb(13),a.jc("matDatepicker",t),a.Bb(1),a.jc("for",t),a.Bb(36),a.jc("ngIf",e.bmiString),a.Bb(4),a.jc("disabled",!e.isEditing||e.isUploading),a.Bb(1),a.Dc("",null!=e.currentRecords&&e.currentRecords.biochemicalResults?e.isSaving?"Replacing file...":"Replace file":e.isSaving?"Attaching...":"Attach file"," "),a.Bb(3),a.jc("ngIf",null==e.currentRecords?null:e.currentRecords.biochemicalResults)}},directives:[i.k,g.y,g.r,g.i,y.b,y.f,g.u,w.b,g.c,g.q,g.h,g.w,C.b,C.d,y.g,C.a,R.a,k.m,y.e,M.a,c.d,h,i.i],styles:[""]}),t})(),F=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-support"]],decls:17,vars:0,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-col","py-4"],[1,"text-base"],["appearance","outline",1,"mt-2"],[1,"font-sans"],["rows","8","matInput","",1,"font-sans"],["type","submit","mat-raised-button","","color","accent",1,"-mt-5","mb-2","text-base"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Support "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"p",5),a.Bc(8," Having trobule? Please provide details of your problem. "),a.Sb(),a.Tb(9,"mat-form-field",6),a.Tb(10,"mat-label",7),a.Bc(11,"Query"),a.Sb(),a.Ob(12,"textarea",8),a.Sb(),a.Tb(13,"button",9),a.Bc(14," Submit "),a.Sb(),a.Sb(),a.Sb(),a.Tb(15,"div",10),a.Ob(16,"app-user-card"),a.Sb(),a.Sb())},directives:[y.b,y.f,w.b,M.a,c.d,h],styles:[""]}),t})();var P=n("+0xr"),L=n("M9IT");function U(t,e){1&t&&(a.Tb(0,"th",16),a.Bc(1," No. "),a.Sb())}function z(t,e){if(1&t&&(a.Tb(0,"td",17),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Dc(" ",t.position," ")}}function H(t,e){1&t&&(a.Tb(0,"th",16),a.Bc(1," Name "),a.Sb())}function q(t,e){if(1&t&&(a.Tb(0,"td",17),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Dc(" ",t.name," ")}}function V(t,e){1&t&&(a.Tb(0,"th",16),a.Bc(1," Weight "),a.Sb())}function E(t,e){if(1&t&&(a.Tb(0,"td",17),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Dc(" ",t.weight," ")}}function G(t,e){1&t&&(a.Tb(0,"th",16),a.Bc(1," Symbol "),a.Sb())}function $(t,e){if(1&t&&(a.Tb(0,"td",17),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Dc(" ",t.symbol," ")}}function Q(t,e){1&t&&a.Ob(0,"tr",18)}function W(t,e){1&t&&a.Ob(0,"tr",19)}const _=function(){return[5,10,20]};let K=(()=>{class t{constructor(){this.displayedColumns=["position","name","weight","symbol"],this.dataSource=new P.k(Y)}ngAfterViewInit(){this.dataSource.paginator=this.paginator}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-history"]],viewQuery:function(t,e){if(1&t&&a.Gc(L.a,!0),2&t){let t;a.oc(t=a.bc())&&(e.paginator=t.first)}},decls:25,vars:6,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"shadow-sm","rounded","border","mt-4"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","weight"],["matColumnDef","symbol"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," History "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"table",5),a.Rb(8,6),a.zc(9,U,2,0,"th",7),a.zc(10,z,2,1,"td",8),a.Qb(),a.Rb(11,9),a.zc(12,H,2,0,"th",7),a.zc(13,q,2,1,"td",8),a.Qb(),a.Rb(14,10),a.zc(15,V,2,0,"th",7),a.zc(16,E,2,1,"td",8),a.Qb(),a.Rb(17,11),a.zc(18,G,2,0,"th",7),a.zc(19,$,2,1,"td",8),a.Qb(),a.zc(20,Q,1,0,"tr",12),a.zc(21,W,1,0,"tr",13),a.Sb(),a.Ob(22,"mat-paginator",14),a.Sb(),a.Sb(),a.Tb(23,"div",15),a.Ob(24,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(7),a.jc("dataSource",e.dataSource),a.Bb(13),a.jc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.jc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.jc("pageSizeOptions",a.lc(5,_))("pageSize",10))},directives:[P.j,P.c,P.e,P.b,P.g,P.i,L.a,c.d,h,P.d,P.a,P.f,P.h],styles:[""]}),t})();const Y=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"},{position:11,name:"Sodium",weight:22.9897,symbol:"Na"},{position:12,name:"Magnesium",weight:24.305,symbol:"Mg"},{position:13,name:"Aluminum",weight:26.9815,symbol:"Al"},{position:14,name:"Silicon",weight:28.0855,symbol:"Si"},{position:15,name:"Phosphorus",weight:30.9738,symbol:"P"},{position:16,name:"Sulfur",weight:32.065,symbol:"S"},{position:17,name:"Chlorine",weight:35.453,symbol:"Cl"},{position:18,name:"Argon",weight:39.948,symbol:"Ar"},{position:19,name:"Potassium",weight:39.0983,symbol:"K"},{position:20,name:"Calcium",weight:40.078,symbol:"Ca"}];var J=n("hoOL"),X=n("xHqg");function Z(t,e){1&t&&a.Bc(0,"Select your preferred date")}function tt(t,e){1&t&&a.Bc(0,"Select your appointment time")}function et(t,e){if(1&t&&(a.Tb(0,"mat-option",48),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.jc("value",t.value),a.Bb(1),a.Dc(" ",t.display," ")}}function nt(t,e){1&t&&a.Bc(0,"Service to Avail")}function it(t,e){1&t&&a.Bc(0,"Fill out information")}function ot(t,e){1&t&&a.Bc(0,"Payment")}function at(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",50),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Bc(5," Bank of the Philippine Islands "),a.Sb(),a.Tb(6,"p"),a.Bc(7," Branch: Lipa Poblacion, Lipa City Batangas"),a.Sb(),a.Tb(8,"p"),a.Bc(9," Account Number: "),a.Tb(10,"span",53),a.Bc(11,"9011-0017-15"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Bc(13," Account Type: Current Account"),a.Sb(),a.Tb(14,"p"),a.Bc(15," Swift Code: BOPIPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function st(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",54),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Bc(5," Metropolitan Bank & Trust Company"),a.Sb(),a.Tb(6,"p"),a.Bc(7," Branch: B. Morada Lipa City, Barangas"),a.Sb(),a.Tb(8,"p"),a.Bc(9," Account Number: "),a.Tb(10,"span",53),a.Bc(11,"145-3-14503985-2"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Bc(13," Account Type: Savings Account"),a.Sb(),a.Tb(14,"p"),a.Bc(15," Swift Code: MBTCPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function rt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",55),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Bc(5," Union Bank "),a.Sb(),a.Tb(6,"p"),a.Bc(7," Branch: Lipa Branch, Lipa City Batangas"),a.Sb(),a.Tb(8,"p"),a.Bc(9," Account Number: "),a.Tb(10,"span",53),a.Bc(11,"002660003598"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Bc(13," Account Type: Savings Account"),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function ct(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Tb(2,"div",56),a.Ob(3,"img",57),a.Sb(),a.Tb(4,"div",51),a.Tb(5,"h1",52),a.Bc(6," Banco De Oro"),a.Sb(),a.Tb(7,"p"),a.Bc(8," Branch: Ayala Highway, Lipa City Batangas"),a.Sb(),a.Tb(9,"p"),a.Bc(10," Account Number: "),a.Tb(11,"span",53),a.Bc(12,"1880141440"),a.Sb(),a.Sb(),a.Tb(13,"p"),a.Bc(14," Account Type: Savings Account"),a.Sb(),a.Tb(15,"p"),a.Bc(16," Swift Code: BNORTHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function lt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Tb(2,"div",51),a.Tb(3,"h1",52),a.Bc(4," On Site Payment "),a.Sb(),a.Tb(5,"p"),a.Bc(6," Proceed to the Weight Management Center for encoding and payment instructions. "),a.Sb(),a.Tb(7,"p"),a.Bc(8," We are open from "),a.Tb(9,"span",58),a.Bc(10," 6 AM - 6 PM "),a.Sb(),a.Bc(11,"everyday "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}const bt=function(){return[0]},dt=function(){return[1]},mt=function(){return[2]},pt=function(){return[3]},ut=function(){return[4]};function ht(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",7),a.ac("ngSubmit",function(){return a.rc(t),a.ec().onSubmit()}),a.Tb(1,"mat-vertical-stepper",8),a.Tb(2,"mat-step",9),a.zc(3,Z,1,0,"ng-template",10),a.Tb(4,"mat-form-field",11),a.Tb(5,"mat-label",12),a.Bc(6,"Appointment Date"),a.Sb(),a.Ob(7,"input",13),a.Ob(8,"mat-datepicker-toggle",14),a.Ob(9,"mat-datepicker",null,15),a.Sb(),a.Tb(11,"div"),a.Tb(12,"button",16),a.Bc(13,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(14,"mat-step",17),a.zc(15,tt,1,0,"ng-template",10),a.Tb(16,"p",18),a.Bc(17," Listed time options are based on your selected date. "),a.Sb(),a.Tb(18,"mat-form-field",19),a.Tb(19,"mat-label",12),a.Bc(20,"Appointment Time"),a.Sb(),a.Tb(21,"mat-select",20),a.zc(22,et,2,2,"mat-option",21),a.Sb(),a.Sb(),a.Tb(23,"div"),a.Tb(24,"button",22),a.Bc(25,"Back"),a.Sb(),a.Tb(26,"button",16),a.Bc(27,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(28,"mat-step",23),a.zc(29,nt,1,0,"ng-template",24),a.Tb(30,"mat-form-field",25),a.Tb(31,"mat-select",26),a.ac("valueChange",function(e){return a.rc(t),a.ec().selectedAppointmentType=e}),a.Tb(32,"mat-option",27),a.Bc(33," Nutrition Counseling "),a.Sb(),a.Tb(34,"mat-option",28),a.Bc(35," One Week Cycle Menu "),a.Sb(),a.Tb(36,"mat-option",29),a.Bc(37," Nutrition Counseling & One Week Cycle Menu "),a.Sb(),a.Sb(),a.Sb(),a.Tb(38,"div"),a.Tb(39,"button",30),a.Bc(40,"Back"),a.Sb(),a.Tb(41,"button",31),a.Bc(42,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(43,"mat-step",32),a.zc(44,it,1,0,"ng-template",24),a.Tb(45,"div",33),a.Tb(46,"mat-form-field",11),a.Tb(47,"mat-label",12),a.Bc(48,"Complains"),a.Sb(),a.Ob(49,"textarea",34),a.Sb(),a.Tb(50,"mat-form-field",35),a.Tb(51,"mat-label",12),a.Bc(52,"Current Medications"),a.Sb(),a.Ob(53,"textarea",36),a.Sb(),a.Sb(),a.Tb(54,"div"),a.Tb(55,"button",30),a.Bc(56,"Back"),a.Sb(),a.Tb(57,"button",31),a.Bc(58,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(59,"mat-step",37),a.zc(60,ot,1,0,"ng-template",24),a.Tb(61,"p",38),a.Bc(62,"You can choose to settle your account through the following bank to bank options"),a.Sb(),a.Tb(63,"div",39),a.zc(64,at,16,0,"div",40),a.zc(65,st,16,0,"div",40),a.zc(66,rt,14,0,"div",40),a.zc(67,ct,17,0,"div",40),a.zc(68,lt,12,0,"div",40),a.Sb(),a.Tb(69,"mat-form-field",25),a.Tb(70,"mat-select",41),a.ac("valueChange",function(e){return a.rc(t),a.ec().selected=e}),a.Tb(71,"mat-option",42),a.Bc(72," BPI "),a.Sb(),a.Tb(73,"mat-option",43),a.Bc(74," Union Bank "),a.Sb(),a.Tb(75,"mat-option",44),a.Bc(76," Metrobank "),a.Sb(),a.Tb(77,"mat-option",45),a.Bc(78," BDO "),a.Sb(),a.Tb(79,"mat-option",46),a.Bc(80," On Site Payment "),a.Sb(),a.Sb(),a.Sb(),a.Tb(81,"div"),a.Tb(82,"button",47),a.Bc(83),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.pc(10),e=a.ec();a.jc("formGroup",e.formGroup),a.Bb(1),a.jc("linear",!0),a.Bb(1),a.jc("stepControl",e.formArray.get(a.lc(22,bt))),a.Bb(5),a.jc("matDatepicker",t)("matDatepickerFilter",e.dateFilter)("min",e.todayDate),a.Bb(1),a.jc("for",t),a.Bb(6),a.jc("stepControl",e.formArray.get(a.lc(23,dt))),a.Bb(8),a.jc("ngForOf",e.times),a.Bb(6),a.jc("stepControl",e.formArray.get(a.lc(24,mt))),a.Bb(3),a.jc("value",e.selectedAppointmentType),a.Bb(12),a.jc("stepControl",e.formArray.get(a.lc(25,pt))),a.Bb(16),a.jc("stepControl",e.formArray.get(a.lc(26,ut))),a.Bb(4),a.jc("ngSwitch",e.selected),a.Bb(1),a.jc("ngSwitchCase","bpi"),a.Bb(1),a.jc("ngSwitchCase","metro"),a.Bb(1),a.jc("ngSwitchCase","union"),a.Bb(1),a.jc("ngSwitchCase","bdo"),a.Bb(1),a.jc("ngSwitchCase","on_site"),a.Bb(2),a.jc("value",e.selected),a.Bb(12),a.jc("disabled",e.isSubmitting||!e.formGroup.valid),a.Bb(1),a.Cc(e.isSubmitting?"Submitting..":"Submit")}}function ft(t,e){if(1&t&&(a.Tb(0,"div",59),a.Tb(1,"h1",60),a.Bc(2," Appointment Summary "),a.Sb(),a.Tb(3,"p",61),a.Bc(4," Status: "),a.Tb(5,"span"),a.Bc(6),a.Sb(),a.Sb(),a.Tb(7,"p",62),a.Bc(8," Appointment Schedule "),a.Sb(),a.Tb(9,"p",61),a.Bc(10),a.Sb(),a.Tb(11,"p",62),a.Bc(12," Payment Method "),a.Sb(),a.Tb(13,"p",61),a.Bc(14),a.Sb(),a.Tb(15,"p",62),a.Bc(16," Amount Due "),a.Sb(),a.Tb(17,"p",61),a.Bc(18),a.Sb(),a.Sb()),2&t){const t=a.ec();a.jc("routerLink","./appointments/view/"+t.resultId),a.Bb(6),a.Dc(" ",t.appointment.status," "),a.Bb(4),a.Dc(" ",t.moment(t.appointment.schedule).format("LLL")," "),a.Bb(4),a.Dc(" ",t.appointment.paymentMethod.toUpperCase(),""),a.Bb(4),a.Dc(" ",0===t.appointment.amountDue?"TBD":t.appointment.amountDue," ")}}let gt=(()=>{class t{constructor(t,e,n,i,o){this.formBuilder=t,this.patientService=e,this.authService=n,this.appointmentService=i,this.snackBar=o,this.isLinear=!1,this.todayDate=new Date,this.isSubmitting=!1,this.result="",this.times=[{display:"10:00 AM",value:"10:00"},{display:"11:00 AM",value:"11:00"},{display:"12:00 PM",value:"12:00"},{display:"1:00 PM",value:"13:00"},{display:"2:00 PM",value:"14:00"},{display:"3:00 PM",value:"15:00"},{display:"4:00 PM",value:"16:00"},{display:"5:00 PM",value:"17:00"},{display:"6:00 PM",value:"18:00"}],this.selected="",this.selectedAppointmentType="",this.dateFilter=t=>{const e=(t||new Date).getDay();return null===t&&(t=new Date),0!==e&&6!==e},this.moment=B}ngOnInit(){this.formArray=this.formBuilder.array([this.formBuilder.group({appointmentDate:["",g.x.required]}),this.formBuilder.group({appointmentTime:["",g.x.required]}),this.formBuilder.group({appointmentType:["",g.x.required]}),this.formBuilder.group({complaints:["",g.x.required],currentMedications:["",g.x.required]}),this.formBuilder.group({paymentMethod:["",g.x.required]})]),this.formGroup=this.formBuilder.group({formArray:this.formArray}),this.formGroup.valueChanges.subscribe(t=>{console.log(this.formGroup.valid)})}onSubmit(){this.isSubmitting=!0;const t=this.formArray.value.reduce((t,e)=>{const n=Object.assign({},e);return Object.keys(n).forEach(e=>{t[e]?Object.assign(t[e],n[e]):t[e]=n[e]}),t},{});console.log(t),t.appointmentDate=B(t.appointmentDate).format("L");const e={patient:{id:this.authService.currentUserValue.id},complaints:t.complaints,currentMedications:t.currentMedications,paymentMethod:t.paymentMethod,appointmentType:t.appointmentType,amountDue:t.amountDue,schedule:B(`${t.appointmentDate} ${t.appointmentTime}`,"MM/DD/YYYY HH:mm").format()};console.log(e),setTimeout(()=>{this.appointmentService.createAppointment(e).subscribe(t=>{t&&(this.result="success",this.isSubmitting=!1,this.snackBar.open("Success!",void 0,{duration:3e3}),this.appointment=t,this.resultId=t.id)},t=>{this.result="error",this.isSubmitting=!1})},800)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(g.e),a.Nb(m.a),a.Nb(r.a),a.Nb(J.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-book-an-appointment"]],decls:10,vars:2,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","mb-4","leading-tight","text-gray-900"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","summary p-6 border rounded shadow-sm hover:shadow-md outline-none cursor-pointer",3,"routerLink",4,"ngIf"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],[3,"formGroup","ngSubmit"],["formArrayName","formArray",3,"linear"],["formGroupName","0",1,"font-sans",3,"stepControl"],["matStepLabel","","class","font-sans"],["appearance","outline"],[1,"font-sans"],["matInput","","placeholder","mm/dd/yyyy","required","","name","appointmentDate","formControlName","appointmentDate",1,"font-sans",3,"matDatepicker","matDatepickerFilter","min"],["matSuffix","",3,"for"],["picker",""],["type","button","mat-button","","matStepperNext","",1,"font-sans"],["formGroupName","1",3,"stepControl"],[1,"text-base","pt-4"],["appearance","outline",1,"mt-4","font-sans"],["formControlName","appointmentTime","name","appointmentTime",1,"font-sans"],["class","font-sans",3,"value",4,"ngFor","ngForOf"],["type","button","mat-button","","matStepperPrevious","",1,"font-sans"],["formGroupName","2",3,"stepControl"],["matStepLabel",""],["appearance","outline",1,"mt-4","w-1/3"],["formControlName","appointmentType","name","appointmentType","placeholder","Select Service To Avail",1,"font-sans",3,"value","valueChange"],["value","nutrition_counseling",1,"font-sans"],["value","one_week_cycle_menu",1,"font-sans"],["value","both",1,"font-sans"],["type","button","mat-button","","matStepperPrevious",""],["type","button","mat-button","","matStepperNext",""],["formGroupName","3",3,"stepControl"],[1,"flex","flex-col","w-1/3","mt-2"],["rows","8","matInput","","formControlName","complaints","name","complaints",1,"font-sans"],["appearance","outline",1,"mt-1"],["rows","5","matInput","","formControlName","currentMedications","name","currentMedications",1,"font-sans"],["formGroupName","4",3,"stepControl"],[1,"mt-2"],[1,"my-2",3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","paymentMethod","name","paymentMethod","placeholder","Select Payment Method",1,"font-sans",3,"value","valueChange"],["value","bpi",1,"font-sans"],["value","union",1,"font-sans"],["value","metro",1,"font-sans"],["value","bdo",1,"font-sans"],["value","on_site",1,"font-sans"],["type","submit","mat-raised-button","","color","accent",1,"mt-2",3,"disabled"],[1,"font-sans",3,"value"],[1,"flex","flex-row"],["src","/assets/bpi.png","alt","",1,"h-12","mr-6"],[1,"info"],[1,"text-lg","font-medium","text-gray-800"],[1,"font-bold","primary"],["src","/assets/metro.png","alt","",1,"h-12","mr-6"],["src","/assets/unionbank.png","alt","",1,"h-12","mr-6"],[1,"image","min-w-lg","max-w-lg"],["src","/assets/bdo.png","alt","",1,"h-14","mr-6"],[1,"font-bold"],[1,"summary","p-6","border","rounded","shadow-sm","hover:shadow-md","outline-none","cursor-pointer",3,"routerLink"],[1,"text-xl","font-medium","mb-2","pb-2","border-b"],[1,"text-lg","font-medium"],[1,"text-base","font-medium","text-gray-500","mt-2"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Book an Appointment "),a.Sb(),a.Sb(),a.Sb(),a.zc(6,ht,84,27,"form",4),a.zc(7,ft,19,5,"div",5),a.Sb(),a.Tb(8,"div",6),a.Ob(9,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(6),a.jc("ngIf",!e.result),a.Bb(1),a.jc("ngIf","success"===e.result))},directives:[i.k,c.d,h,g.y,g.r,g.i,X.f,g.d,X.a,g.j,X.b,y.b,y.f,w.b,g.c,C.b,g.w,g.q,g.h,C.d,y.g,C.a,M.a,X.d,R.a,i.j,X.e,k.m,i.m,i.n],styles:[""]}),t})(),St=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-nutrition-tools"]],decls:11,vars:0,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"shadow-sm","rounded","border","mt-4"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Nutrition Tools "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"h1"),a.Bc(8," Hello. "),a.Sb(),a.Sb(),a.Sb(),a.Tb(9,"div",5),a.Ob(10,"app-user-card"),a.Sb(),a.Sb())},directives:[c.d,h],styles:[""]}),t})();function Tt(t,e){1&t&&(a.Tb(0,"li",23),a.Bc(1," Password too weak "),a.Sb())}function vt(t,e){1&t&&(a.Tb(0,"li",23),a.Bc(1," Password doesn't match "),a.Sb())}let Bt=(()=>{class t{constructor(t,e,n,i){this.fb=t,this.patientService=e,this.authService=n,this.fileService=i,this.submitting=!1,this.updateResult="",this.errorMessage="",this.isLinear=!0,this.progress=0,this.message="",this.updateForm=this.fb.group({contactNumber:[this.authService.currentUserValue.contactNumber,[g.x.required,g.x.min(11)]],password:["",[g.x.required,this.passwordValidator2(),this.passwordStrengthValidator()]],passwordConfirm:new g.f("",this.passwordValidator())}),this.patient=this.authService.currentUserValue,console.log(this.patient)}uploadFile(t){if(console.log(t),0===t.length)return;const e=t[0],n=new FormData;n.append("file",e,v.a()+"."+e.type.split("/")[1]),this.fileServiceS=this.fileService.upload(n).subscribe(t=>{t.type===S.d.UploadProgress?this.progress=Math.round(100*t.loaded/t.total):t.type===S.d.Response&&(this.message="Upload success.",this.patient.profileImageURL=`${T.a.apiUrl}/file/files/${t.body.path}`,console.log(this.patient),this.patientService.updatePhoto(this.patient).subscribe(t=>{console.log(t),t&&this.authService.updateUser(t)}))})}fileChange(t){this.uploadFile(t)}ngOnInit(){}onSubmit(){this.submitting=!0;const t={contactNumber:this.updateForm.value.contactNumber,password:this.updateForm.value.password,username:this.authService.currentUserValue.username};setTimeout(()=>{this.patientServiceS=this.patientService.updateAccount(t).subscribe(t=>{t&&(this.submitting=!1,this.updateResult="success")},t=>{this.submitting=!1,this.updateResult="error",console.log(t),this.errorMessage=t.message})},900)}passwordValidator2(){return t=>{var e,n;return(null===(e=this.updateForm)||void 0===e?void 0:e.controls.passwordConfirm.value.length)>0?t.value===(null===(n=this.updateForm)||void 0===n?void 0:n.controls.passwordConfirm.value)?null:{passwordMismatch:t.value}:null}}passwordValidator(){return t=>{var e;return t.value===(null===(e=this.updateForm)||void 0===e?void 0:e.controls.password.value)?null:{passwordMismatch:t.value}}}passwordStrengthValidator(){const t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$");return e=>t.test(e.value)?null:{passwordStrength:e.value}}pwKeyup(){this.updateForm.controls.password.updateValueAndValidity()}ngOnDestroy(){this.patientServiceS&&this.patientServiceS.unsubscribe(),this.fileServiceS&&this.fileServiceS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(g.e),a.Nb(m.a),a.Nb(r.a),a.Nb(x.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-account-settings"]],decls:36,vars:6,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-row","mt-4"],[1,"form","w-1/2"],["autocomplete","off",1,"flex","flex-col","font-sans",3,"formGroup","ngSubmit"],[1,"errors","list-disc","mx-4","transition-all"],["class","text-red-800 font-medium py-2",4,"ngIf"],[1,"text-xl","font-medium","text-gray-800","mt-8"],["appearance","outline",1,"mt-4"],[1,"font-sans"],["matInput","","placeholder","Ex: 09123456789","type","tel","minlength","11","maxlength","11","autocomplete","off","spellcheck","false","required","","formControlName","contactNumber",1,"font-sans"],["appearance","outline",1,"-mt-4"],["matInput","","placeholder","Password","type","password","autocomplete","off","spellcheck","false","required","","formControlName","password",1,"font-sans"],["appearance","outline"],["matInput","","placeholder","Re-type Password","type","password","autocomplete","off","spellcheck","false","required","","formControlName","passwordConfirm",1,"font-sans",3,"keyup"],["type","submit","mat-raised-button","","color","primary",1,"-mt-4","mb-2",3,"disabled"],[1,"w-1/2","px-8"],["alt","",1,"my-4","w-72","h-72","shadow-lg","border","rounded-lg","object-cover",3,"src"],["type","file","accept",".png,.jpg,.jpeg","placeholder","Choose file",2,"display","none",3,"change"],["file",""],["type","button","mat-raised-button","","color","accent",1,"button","-mt-2","w-72",3,"click"],[1,"text-red-800","font-medium","py-2"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Account Settings "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"div",5),a.Tb(8,"form",6),a.ac("ngSubmit",function(){return e.onSubmit()}),a.Tb(9,"ul",7),a.zc(10,Tt,2,0,"li",8),a.zc(11,vt,2,0,"li",8),a.Sb(),a.Tb(12,"h1",9),a.Bc(13," Change "),a.Sb(),a.Tb(14,"mat-form-field",10),a.Tb(15,"mat-label",11),a.Bc(16,"Contact Number"),a.Sb(),a.Ob(17,"input",12),a.Sb(),a.Tb(18,"mat-form-field",13),a.Tb(19,"mat-label",11),a.Bc(20,"Password"),a.Sb(),a.Ob(21,"input",14),a.Tb(22,"mat-hint"),a.Bc(23,"8 characters minimum, atleast one uppercase, one lowercase and one number. "),a.Sb(),a.Sb(),a.Tb(24,"mat-form-field",15),a.Tb(25,"mat-label",11),a.Bc(26,"Confirm Password"),a.Sb(),a.Tb(27,"input",16),a.ac("keyup",function(){return e.pwKeyup()}),a.Sb(),a.Sb(),a.Tb(28,"button",17),a.Bc(29),a.Sb(),a.Sb(),a.Sb(),a.Tb(30,"div",18),a.Ob(31,"img",19),a.Tb(32,"input",20,21),a.ac("change",function(){a.rc(t);const n=a.pc(33);return e.fileChange(n.files)}),a.Sb(),a.Tb(34,"button",22),a.ac("click",function(){return a.rc(t),a.pc(33).click()}),a.Bc(35,"Update Photo"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}2&t&&(a.Bb(8),a.jc("formGroup",e.updateForm),a.Bb(2),a.jc("ngIf",null==e.updateForm.controls.password.errors?null:e.updateForm.controls.password.errors.passwordStrength),a.Bb(1),a.jc("ngIf",null==e.updateForm.controls.password.errors?null:e.updateForm.controls.password.errors.passwordMismatch),a.Bb(17),a.jc("disabled",e.submitting||!e.updateForm.valid),a.Bb(1),a.Cc(e.submitting?"Saving Changes..":"Save Changes"),a.Bb(2),a.kc("src",e.patient.profileImageURL?e.patient.profileImageURL:"assets/default.png",a.sc))},directives:[g.y,g.r,g.i,i.k,y.b,y.f,w.b,g.c,g.m,g.l,g.w,g.q,g.h,y.e,M.a],styles:[""]}),t})();var xt=n("Dh3D"),yt=n("VRyK"),wt=n("LRne"),Ct=n("JX91"),Rt=n("eIep"),kt=n("lJxs"),Mt=n("JIr8"),Dt=n("vCrC");function Nt(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Schedule"),a.Sb())}function Ot(t,e){if(1&t&&(a.Tb(0,"td",31),a.Bc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec();a.Bb(1),a.Cc(n.moment(t.schedule).format("LLL"))}}function jt(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Appointment Type"),a.Sb())}function At(t,e){if(1&t&&(a.Tb(0,"td",32),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Cc(t.appointmentType)}}function It(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Payment Method"),a.Sb())}function Ft(t,e){if(1&t&&(a.Tb(0,"td",33),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Cc(t.paymentMethod.toUpperCase())}}function Pt(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Amount Due"),a.Sb())}function Lt(t,e){if(1&t&&(a.Tb(0,"td",32),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Cc(0===t.amountDue?"Pending":"\u20b1"+t.amountDue)}}function Ut(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Status"),a.Sb())}const zt=function(t,e){return{"text-red-900":t,"font-medium":e}};function Ht(t,e){if(1&t&&(a.Tb(0,"td",34),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.jc("ngClass",a.nc(2,zt,!t.approved,!t.approved)),a.Bb(1),a.Cc(t.status)}}function qt(t,e){1&t&&(a.Tb(0,"th",30),a.Bc(1,"Assigned RND"),a.Sb())}function Vt(t,e){if(1&t&&(a.Tb(0,"td",33),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Cc(t.rnd?t.rnd.firstName:"Pending")}}function Et(t,e){1&t&&(a.Tb(0,"th",35),a.Bc(1," Updated At "),a.Sb())}function Gt(t,e){if(1&t&&(a.Tb(0,"td",31),a.Bc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Cc(t.updatedAt)}}function $t(t,e){1&t&&a.Ob(0,"th",30)}const Qt=function(t){return["/patient","appointments","view",t]};function Wt(t,e){if(1&t&&(a.Tb(0,"td",36),a.Tb(1,"button",37),a.Bc(2,"View "),a.Sb(),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.jc("routerLink",a.mc(1,Qt,t.id))}}function _t(t,e){1&t&&a.Ob(0,"tr",38)}function Kt(t,e){1&t&&a.Ob(0,"tr",39)}let Yt=(()=>{class t{constructor(t,e,n,i){this.patientService=t,this.rndService=e,this.appointmentService=n,this.authService=i,this.selected="active",this.displayedColumns=["schedule","appointmentType","paymentMethod","amountDue","status","rnd","updatedAt","buttons"],this.resultsLength=0,this.isLoadingResults=!0,this.moment=B}update(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(yt.a)(this.sort.sortChange,this.paginator.page).pipe(Object(Ct.a)({}),Object(Rt.a)(()=>(this.isLoadingResults=!0,"archived"===this.selected?this.appointmentService.getArchivedAppointmentsByPatient(this.authService.currentUserValue.id):this.appointmentService.getActiveAppointmentsByPatient(this.authService.currentUserValue.id))),Object(kt.a)(t=>{this.isLoadingResults=!1,this.resultsLength=t.length,console.log("Results length",this.resultsLength);const e=t;for(const n of e)switch(n.createdAt=B(n.createdAt).format("LLL"),n.updatedAt=B(n.updatedAt).format("LLL"),n.appointmentType){case"nutrition_counseling":n.appointmentType="Nutrition Counseling";break;case"one_week_cycle_menu":n.appointmentType="One Week Cycle Menu";break;case"both":n.appointmentType="Nutrition Counseling & One Week Cycle Menu"}return e}),Object(Mt.a)(()=>(this.isLoadingResults=!1,Object(wt.a)([])))).subscribe(t=>this.data=t)}ngAfterViewInit(){this.update()}valueChange(t){this.update()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(m.a),a.Nb(Dt.a),a.Nb(J.a),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-appointments"]],viewQuery:function(t,e){if(1&t&&(a.Gc(L.a,!0),a.Gc(xt.a,!0)),2&t){let t;a.oc(t=a.bc())&&(e.paginator=t.first),a.oc(t=a.bc())&&(e.sort=t.first)}},decls:47,vars:7,consts:[[1,"bg-white","shadow-sm"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],["routerLink","/patient/book-an-appointment","mat-raised-button","","color","accent",1,"mb-4"],[1,"w-full"],["appearance","outline",1,"font-sans","rounded-md"],[1,"font-sans",3,"value","valueChange"],["value","archived",1,"font-sans"],["value","active",1,"font-sans"],[1,"text-lg","font-medium","pb-2"],[1,"table","w-full","m-0","border","p-2","rounded-md","font-sans","text-base","mb-4"],["mat-table","","multiTemplateDataRows","","matSort","","matSortActive","updatedAt","matSortDisableClear","","matSortDirection","desc",1,"w-full","m-0",3,"dataSource"],["matColumnDef","schedule"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","font-sans text-sm",4,"matCellDef"],["matColumnDef","appointmentType"],["mat-cell","","class","font-sans font-medium text-sm",4,"matCellDef"],["matColumnDef","paymentMethod"],["mat-cell","","class","font-sans font-bold text-sm",4,"matCellDef"],["matColumnDef","amountDue"],["matColumnDef","status"],["mat-cell","","class","font-sans text-sm",3,"ngClass",4,"matCellDef"],["matColumnDef","rnd"],["matColumnDef","updatedAt"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","buttons"],["mat-cell","","class","font-sans",4,"matCellDef"],["mat-header-row","","class","text-base",4,"matHeaderRowDef"],["mat-row","","class","text-base",4,"matRowDef","matRowDefColumns"],[1,"font-sans",3,"length","pageSize"],["mat-header-cell",""],["mat-cell","",1,"font-sans","text-sm"],["mat-cell","",1,"font-sans","font-medium","text-sm"],["mat-cell","",1,"font-sans","font-bold","text-sm"],["mat-cell","",1,"font-sans","text-sm",3,"ngClass"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-cell","",1,"font-sans"],[1,"font-bold","bg-blue-50","p-2","rounded-sm",3,"routerLink"],["mat-header-row","",1,"text-base"],["mat-row","",1,"text-base"]],template:function(t,e){1&t&&(a.Tb(0,"header",0),a.Tb(1,"div",1),a.Tb(2,"h1",2),a.Bc(3," Appointment "),a.Sb(),a.Sb(),a.Sb(),a.Tb(4,"div",1),a.Tb(5,"button",3),a.Bc(6,"Book an Appointment"),a.Sb(),a.Tb(7,"div",4),a.Tb(8,"mat-form-field",5),a.Tb(9,"mat-label"),a.Bc(10,"Select"),a.Sb(),a.Tb(11,"mat-select",6),a.ac("valueChange",function(t){return e.selected=t})("valueChange",function(t){return e.valueChange(t)}),a.Tb(12,"mat-option",7),a.Bc(13," Archived "),a.Sb(),a.Tb(14,"mat-option",8),a.Bc(15," Active "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(16,"h1",9),a.Bc(17),a.Sb(),a.Tb(18,"div",10),a.Tb(19,"table",11),a.Rb(20,12),a.zc(21,Nt,2,0,"th",13),a.zc(22,Ot,2,1,"td",14),a.Qb(),a.Rb(23,15),a.zc(24,jt,2,0,"th",13),a.zc(25,At,2,1,"td",16),a.Qb(),a.Rb(26,17),a.zc(27,It,2,0,"th",13),a.zc(28,Ft,2,1,"td",18),a.Qb(),a.Rb(29,19),a.zc(30,Pt,2,0,"th",13),a.zc(31,Lt,2,1,"td",16),a.Qb(),a.Rb(32,20),a.zc(33,Ut,2,0,"th",13),a.zc(34,Ht,2,5,"td",21),a.Qb(),a.Rb(35,22),a.zc(36,qt,2,0,"th",13),a.zc(37,Vt,2,1,"td",18),a.Qb(),a.Rb(38,23),a.zc(39,Et,2,0,"th",24),a.zc(40,Gt,2,1,"td",14),a.Qb(),a.Rb(41,25),a.zc(42,$t,1,0,"th",13),a.zc(43,Wt,3,3,"td",26),a.Qb(),a.zc(44,_t,1,0,"tr",27),a.zc(45,Kt,1,0,"tr",28),a.Sb(),a.Ob(46,"mat-paginator",29),a.Sb(),a.Sb()),2&t&&(a.Bb(11),a.jc("value",e.selected),a.Bb(6),a.Dc(" Showing all ",e.selected.toLowerCase()," appointment(s)"),a.Bb(2),a.jc("dataSource",e.data),a.Bb(25),a.jc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.jc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.jc("length",e.resultsLength)("pageSize",30))},directives:[M.a,c.d,y.b,y.f,R.a,k.m,P.j,xt.a,P.c,P.e,P.b,P.g,P.i,L.a,P.d,P.a,i.i,xt.b,P.f,P.h],styles:[".mat-header-cell[_ngcontent-%COMP%]{font-size:.975rem;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}"]}),t})();function Jt(t,e){1&t&&(a.Tb(0,"h1",25),a.Bc(1," Proof of payment "),a.Sb())}function Xt(t,e){if(1&t&&a.Ob(0,"img",29),2&t){const t=a.ec().$implicit,e=a.ec();a.kc("src",e.environment.apiUrl+"/file/files/"+(null==t?null:t.path),a.sc)}}function Zt(t,e){if(1&t&&(a.Ob(0,"img",30),a.Tb(1,"p",31),a.Bc(2),a.Sb()),2&t){const t=a.ec().$implicit;a.Bb(2),a.Dc("",t.path," ")}}function te(t,e){if(1&t&&(a.Tb(0,"div"),a.Tb(1,"a",26),a.zc(2,Xt,1,1,"img",27),a.Sb(),a.zc(3,Zt,3,1,"ng-template",null,28,a.Ac),a.Sb()),2&t){const t=e.$implicit,n=a.pc(4),i=a.ec();a.Bb(1),a.kc("href",i.environment.apiUrl+"/file/files/"+(null==t?null:t.path),a.sc),a.Bb(1),a.jc("ngIf","pdf"!==t.path.split(".")[1])("ngIfElse",n)}}function ee(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",33),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Bc(5," Bank of the Philippine Islands "),a.Sb(),a.Tb(6,"p",35),a.Bc(7," Branch: Lipa Poblacion, Lipa City Batangas"),a.Sb(),a.Tb(8,"p",35),a.Bc(9," Account Number: "),a.Tb(10,"span",36),a.Bc(11,"9011-0017-15"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Bc(13," Account Type: Current Account"),a.Sb(),a.Tb(14,"p",35),a.Bc(15," Swift Code: BOPIPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function ne(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",37),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Bc(5," Metropolitan Bank & Trust Company"),a.Sb(),a.Tb(6,"p",35),a.Bc(7," Branch: B. Morada Lipa City, Barangas"),a.Sb(),a.Tb(8,"p",35),a.Bc(9," Account Number: "),a.Tb(10,"span",36),a.Bc(11,"145-3-14503985-2"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Bc(13," Account Type: Savings Account"),a.Sb(),a.Tb(14,"p",35),a.Bc(15," Swift Code: MBTCPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function ie(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",38),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Bc(5," Union Bank "),a.Sb(),a.Tb(6,"p",35),a.Bc(7," Branch: Lipa Branch, Lipa City Batangas"),a.Sb(),a.Tb(8,"p",35),a.Bc(9," Account Number: "),a.Tb(10,"span",36),a.Bc(11,"002660003598"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Bc(13," Account Type: Savings Account"),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function oe(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Tb(2,"div",39),a.Ob(3,"img",40),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h1",34),a.Bc(6," Banco De Oro"),a.Sb(),a.Tb(7,"p",35),a.Bc(8," Branch: Ayala Highway, Lipa City Batangas"),a.Sb(),a.Tb(9,"p",35),a.Bc(10," Account Number: "),a.Tb(11,"span",36),a.Bc(12,"1880141440"),a.Sb(),a.Sb(),a.Tb(13,"p",35),a.Bc(14," Account Type: Savings Account"),a.Sb(),a.Tb(15,"p",35),a.Bc(16," Swift Code: BNORTHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function ae(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Tb(2,"div",6),a.Tb(3,"h1",34),a.Bc(4," On Site Payment "),a.Sb(),a.Tb(5,"p",35),a.Bc(6," Proceed to the Weight Management Center for encoding and payment instructions. "),a.Sb(),a.Tb(7,"p",35),a.Bc(8," We are open from "),a.Tb(9,"span",41),a.Bc(10," 6 AM - 6 PM "),a.Sb(),a.Bc(11,"everyday "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function se(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",42),a.ac("click",function(){return a.rc(t),a.ec(),a.pc(56).click()}),a.Bc(1),a.Sb()}if(2&t){const t=a.ec();a.jc("disabled",t.isUploading&&t.uploadedFilePaths.length===t.filesToUpload),a.Bb(1),a.Dc("",t.isUploading?"Attaching files...":"Attach proof of payment"," ")}}let re=(()=>{class t{constructor(t,e,n,i){this.route=t,this.appointmentService=e,this.fileService=n,this.snackBar=i,this.isUploading=!1,this.progress=0,this.message="",this.uploadedFilePaths=[],this.filesToUpload=0,this.doneUploaded=0,this.moment=B,this.environment=T.a}fetchCurrentAppointment(t){this.appointmentService.getAppointmentById(t).subscribe(t=>{this.appointment=t,console.log(this.appointment)},t=>{alert(t)})}ngOnInit(){const t=parseInt(this.route.snapshot.paramMap.get("id"));this.fetchCurrentAppointment(t)}doneCallback(){if(this.doneUploaded++,this.doneUploaded===this.filesToUpload){console.log("Done! uploading "+this.filesToUpload+" files");for(const t of this.uploadedFilePaths)this.appointment.proofOfPayments.push({id:0,path:t.path});this.isUploading=!1,console.log("sending.",this.appointment),this.appointment.patient.roles=void 0,this.appointmentService.addProofOfPayment(this.appointment.id,this.appointment).subscribe(t=>{t&&this.snackBar.open("Success!",void 0,{duration:3e3})},t=>{console.log(t),this.snackBar.open("Error",void 0,{duration:3e3})})}}uploadFile(t){if(console.log("upload files is called"),this.isUploading=!0,console.log(t),0!==t.length){this.filesToUpload=t.length,console.log("files to upload",this.filesToUpload);const e=new FormData;e.append("file",t[0],v.a()+"."+t[0].type.split("/")[1]),this.fileService.upload(e).subscribe(t=>{t.type===S.d.UploadProgress?this.progress=Math.round(100*t.loaded/t.total):t.type===S.d.Response&&(this.message="Upload success.",this.uploadedFilePaths.push({path:t.body.path}),console.log(this.uploadedFilePaths),this.doneCallback())})}}fileChange(t){this.uploadFile(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(c.a),a.Nb(J.a),a.Nb(x.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-view-appointment"]],decls:57,vars:17,consts:[[1,"bg-white","shadow-sm"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],["routerLink","/patient/appointments"],[1,"text-gray-500"],[1,"content","border","p-4","rounded-md","flex","flex-row","w-2/3"],[1,"info"],[1,"text-2xl","font-medium","text-gray-600","mb-4"],[1,"text-base","text-gray-700","bg-gray-100","p-4","mt-4","rounded-sm"],[1,"pl-4","font-bold"],[1,"text-base","text-gray-600","mt-6"],[1,"pl-4","font-bold","text-gray-900"],[1,"text-base","text-gray-600"],[1,"pl-4","text-gray-900","font-medium"],["class","text-base font-medium my-4",4,"ngIf"],[1,"grid","grid-cols-3","gap-1"],[4,"ngFor","ngForOf"],[1,"payment-instructions","mt-4"],[1,"text-base","font-medium"],[1,"my-2",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"controls","ml-auto","flex","flex-row","h-12"],["type","button","mat-raised-button","","class","button mt-2 w-72 flex flex-col","color","white",3,"disabled","click",4,"ngIf"],["type","file","accept",".png,.jpg,.jpeg,.pdf","placeholder","Choose file",2,"display","none",3,"change"],["file",""],[1,"text-base","font-medium","my-4"],[3,"href"],["alt","","class","mt-2 w-44 h-44 shadow-lg border rounded-lg object-cover",3,"src",4,"ngIf","ngIfElse"],["elseBlk",""],["alt","",1,"mt-2","w-44","h-44","shadow-lg","border","rounded-lg","object-cover",3,"src"],["src","/assets/pdf.png","alt","",1,"w-12","h-12","mt-4"],[1,"text-sm","font-medium","text-gray-700","pt-2"],[1,"flex","flex-row"],["src","/assets/bpi.png","alt","",1,"h-12","mr-6"],[1,"text-lg","font-medium","text-gray-800"],[1,"text-base","text-gray-700"],[1,"font-bold","primary"],["src","/assets/metro.png","alt","",1,"h-12","mr-6"],["src","/assets/unionbank.png","alt","",1,"h-12","mr-6"],[1,"image","min-w-lg","max-w-lg"],["src","/assets/bdo.png","alt","",1,"h-14","mr-6"],[1,"font-bold"],["type","button","mat-raised-button","","color","white",1,"button","mt-2","w-72","flex","flex-col",3,"disabled","click"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"header",0),a.Tb(1,"div",1),a.Tb(2,"h1",2),a.Tb(3,"a",3),a.Bc(4,"Appointments "),a.Sb(),a.Tb(5,"span",4),a.Bc(6,"/ View Appointment "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(7,"div",1),a.Tb(8,"div",5),a.Tb(9,"div",6),a.Tb(10,"h1",7),a.Bc(11," Appointment Details "),a.Sb(),a.Tb(12,"div",8),a.Tb(13,"p"),a.Bc(14," Schedule: "),a.Tb(15,"span",9),a.Bc(16),a.Sb(),a.Sb(),a.Tb(17,"p"),a.Bc(18," Status:\xa0\xa0\xa0\xa0\xa0 "),a.Tb(19,"span",9),a.Bc(20),a.Sb(),a.Sb(),a.Sb(),a.Tb(21,"p",10),a.Bc(22," Patient: "),a.Tb(23,"span",11),a.Bc(24),a.Sb(),a.Sb(),a.Tb(25,"p",12),a.Bc(26," Assigned RND: "),a.Tb(27,"span",13),a.Bc(28),a.Sb(),a.Sb(),a.Tb(29,"p",12),a.Bc(30," Created At: "),a.Tb(31,"span",13),a.Bc(32),a.Sb(),a.Sb(),a.Tb(33,"p",12),a.Bc(34," Payment Method: "),a.Tb(35,"span",13),a.Bc(36),a.Sb(),a.Sb(),a.Tb(37,"p",12),a.Bc(38," Amount Due: "),a.Tb(39,"span",13),a.Bc(40),a.Sb(),a.Sb(),a.zc(41,Jt,2,0,"h1",14),a.Tb(42,"div",15),a.zc(43,te,5,3,"div",16),a.Sb(),a.Tb(44,"div",17),a.Tb(45,"p",18),a.Bc(46," Payment Instructions "),a.Sb(),a.Tb(47,"div",19),a.zc(48,ee,16,0,"div",20),a.zc(49,ne,16,0,"div",20),a.zc(50,ie,14,0,"div",20),a.zc(51,oe,17,0,"div",20),a.zc(52,ae,12,0,"div",20),a.Sb(),a.Sb(),a.Sb(),a.Tb(53,"div",21),a.zc(54,se,2,2,"button",22),a.Tb(55,"input",23,24),a.ac("change",function(){a.rc(t);const n=a.pc(56);return e.fileChange(n.files)}),a.Sb(),a.Sb(),a.Sb(),a.Sb()}2&t&&(a.Bb(16),a.Dc(" ",e.moment(null==e.appointment?null:e.appointment.schedule).format("LLL"),""),a.Bb(4),a.Dc(" ",null==e.appointment?null:e.appointment.status,""),a.Bb(4),a.Ec(" ",null==e.appointment?null:e.appointment.patient.lastName," , ",null==e.appointment?null:e.appointment.patient.firstName,""),a.Bb(4),a.Dc(" ",null!=e.appointment&&e.appointment.rnd?(null==e.appointment?null:e.appointment.rnd.firstName)+" "+(null==e.appointment?null:e.appointment.rnd.lastName):"Pending..."," "),a.Bb(4),a.Dc(" ",e.moment(null==e.appointment?null:e.appointment.createdAt).format("L"),""),a.Bb(4),a.Dc(" ",null==e.appointment?null:e.appointment.paymentMethod.toUpperCase(),""),a.Bb(4),a.Dc(" ",0===(null==e.appointment?null:e.appointment.amountDue)?"TBD":null==e.appointment?null:e.appointment.amountDue,""),a.Bb(1),a.jc("ngIf",(null==e.appointment?null:e.appointment.proofOfPayments.length)>0),a.Bb(2),a.jc("ngForOf",null==e.appointment?null:e.appointment.proofOfPayments),a.Bb(4),a.jc("ngSwitch",null==e.appointment?null:e.appointment.paymentMethod),a.Bb(1),a.jc("ngSwitchCase","bpi"),a.Bb(1),a.jc("ngSwitchCase","metro"),a.Bb(1),a.jc("ngSwitchCase","union"),a.Bb(1),a.jc("ngSwitchCase","bdo"),a.Bb(1),a.jc("ngSwitchCase","on_site"),a.Bb(2),a.jc("ngIf","PENDING_PAYMENT"===(null==e.appointment?null:e.appointment.status)))},directives:[c.e,i.k,i.j,i.m,i.n,M.a],styles:[""]}),t})();var ce=n("pjjj"),le=n("acRR");const be=["scrollMe"];function de(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",10),a.ac("click",function(){a.rc(t);const n=e.$implicit;return a.ec().selectRND(n.rnd)}),a.Tb(1,"div",11),a.Tb(2,"div",12),a.Ob(3,"img",13),a.Sb(),a.Tb(4,"div",14),a.Tb(5,"h1",15),a.Bc(6),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit;a.Bb(3),a.kc("src",t.rnd.profileImageURL,a.sc),a.Bb(3),a.Ec(" ",t.rnd.firstName," ",t.rnd.lastName," ")}}const me=function(t,e){return{"self-start bg-white text-gray-900":t,"self-end bg-accent text-white":e}};function pe(t,e){if(1&t&&(a.Tb(0,"div",26),a.Tb(1,"p",27),a.Bc(2),a.Sb(),a.Tb(3,"p",28),a.Bc(4),a.Sb(),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.jc("ngClass",a.nc(3,me,"rnd"===t.sender,"patient"===t.sender)),a.Bb(2),a.Dc(" ",t.message," "),a.Bb(2),a.Dc("",n.moment(t.createdAt).fromNow()," ")}}function ue(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",16),a.Tb(1,"div",17),a.Tb(2,"h1",15),a.Bc(3),a.Sb(),a.Sb(),a.Tb(4,"div",18,19),a.zc(6,pe,5,6,"div",20),a.Sb(),a.Tb(7,"div",21),a.Tb(8,"h1",15),a.Bc(9," Send Message"),a.Sb(),a.Tb(10,"mat-form-field",22),a.Tb(11,"mat-label",23),a.Bc(12,"Message"),a.Sb(),a.Tb(13,"textarea",24),a.ac("ngModelChange",function(e){return a.rc(t),a.ec().message=e}),a.Sb(),a.Sb(),a.Tb(14,"button",25),a.ac("click",function(){return a.rc(t),a.ec().sendMessage()}),a.Bc(15," Send "),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.ec();a.Bb(3),a.Ec(" ",t.selectedRND.firstName," ",t.selectedRND.lastName," "),a.Bb(3),a.jc("ngForOf",t.messages),a.Bb(7),a.jc("ngModel",t.message)}}const he=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"",component:b,children:[{path:"dashboard",component:f,pathMatch:"full"},{path:"appointments",component:Yt,pathMatch:"full"},{path:"appointments/view/:id",component:re,pathMatch:"full"},{path:"account-settings",component:Bt,pathMatch:"full"},{path:"medical-records",component:I,pathMatch:"full"},{path:"support",component:F,pathMatch:"full"},{path:"history",component:K,pathMatch:"full"},{path:"messages",component:(()=>{class t{constructor(t,e,n,i){this.authService=t,this.messageService=e,this.patientService=n,this.snackBar=i,this.isSendingMessage=!1,this.moment=B,this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{t&&(this.appointments=t.appointments,console.log(this.appointments),this.scrollToBottom())})}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight+100}catch(t){console.log(t)}}updateMessage(t){t.messageService.fetchMessages("patient",t.authService.currentUserValue.id,t.selectedRND.id).subscribe(e=>{e&&(t.messages=e)},e=>{t.snackBar.open("Error",void 0,{duration:3e3})})}startInterval(){const t=this;this.intervalRef=setInterval(()=>{t.updateMessage(t),t.scrollToBottom()},500)}ngOnInit(){}selectRND(t){console.log(t),this.selectedRND=t,this.updateMessage(this),this.startInterval(),this.scrollToBottom()}sendMessage(){this.isSendingMessage=!0;const t=new ce.a;t.message=this.message,t.patientId=this.selectedRND.id,t.rndId=this.authService.currentUserValue.id,t.sender="patient",this.messageService.sendMessage(t).subscribe(t=>{t&&(console.log(t),this.updateMessage(this),this.message=null)},t=>{this.snackBar.open("Error sending message",void 0,{duration:3e3})})}ngOnDestroy(){clearInterval(this.intervalRef)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(le.a),a.Nb(m.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-messages"]],viewQuery:function(t,e){if(1&t&&a.Gc(be,!0),2&t){let t;a.oc(t=a.bc())&&(e.myScrollContainer=t.first)}},decls:14,vars:2,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-row","mt-4","pr-8"],[1,"threads","flex","flex-col","overflow-y-auto","mr-4","pr-2","w-1/3","max-h-96"],[1,"text-sm","font-medium","text-gray-600"],["class","my-2 flex flex-col border py-2 px-4 rounded-md cursor-pointer hover:shadow-lg",3,"click",4,"ngFor","ngForOf"],["class","conversation px-4 py-2 bg-dirty w-2/3 flex flex-col rounded-sm",4,"ngIf"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],[1,"my-2","flex","flex-col","border","py-2","px-4","rounded-md","cursor-pointer","hover:shadow-lg",3,"click"],[1,"patients","flex","flex-row"],[1,"row","flex","flex-col","justify-center"],["alt","",1,"w-14","h-14","border","rounded-full","object-cover",3,"src"],[1,"texts","flex","flex-col","align-middle","justify-center","mx-4"],[1,"text-base","font-medium"],[1,"conversation","px-4","py-2","bg-dirty","w-2/3","flex","flex-col","rounded-sm"],[1,"header","border-b","pb-2"],[1,"thread","flex","flex-col","pt-4","flex-grow","overflow-y-scroll","max-h-96"],["scrollMe",""],["class","message rounded-md py-2 px-4 my-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"message-box","justify-self-end","justify-end","flex","flex-col"],["appearance","outline",1,"mt-4"],[1,"font-sans","text-base"],["matInput","","rows","2",1,"font-sans","text-base",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button","","color","accent",1,"mb-6",3,"click"],[1,"message","rounded-md","py-2","px-4","my-1",3,"ngClass"],[1,"text-base"],[1,"text-xs"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Bc(5," Messages "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"div",5),a.Tb(8,"p",6),a.Bc(9," You can message assigned RND here "),a.Sb(),a.zc(10,de,7,3,"div",7),a.Sb(),a.zc(11,ue,16,4,"div",8),a.Sb(),a.Sb(),a.Tb(12,"div",9),a.Ob(13,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(10),a.jc("ngForOf",e.appointments),a.Bb(1),a.jc("ngIf",e.selectedRND))},directives:[i.j,i.k,c.d,h,y.b,y.f,w.b,g.c,g.q,g.t,M.a,i.i],styles:[""]}),t})(),pathMatch:"full"},{path:"book-an-appointment",component:gt,pathMatch:"full"},{path:"nutrition-tools",component:St,pathMatch:"full"}]}];let fe=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[[c.f.forChild(he)],i.c],c.f]}),t})();var ge=n("RTfJ");let Se=(()=>{class t{}return t.\u0275mod=a.Lb({type:t,bootstrap:[b]}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[i.c,c.f,fe,M.b,L.b,P.l,y.d,w.c,g.v,X.c,C.c,k.n,R.b,d.b,ge.a,xt.c,g.k]]}),t})()}}]);