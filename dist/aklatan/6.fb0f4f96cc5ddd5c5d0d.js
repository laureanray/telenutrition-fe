(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{h2TG:function(t,e,n){"use strict";n.r(e),n.d(e,"PatientModule",function(){return Fe});var i=n("ofXK"),o=n("lFam"),a=n("fXoL"),s=n("0IaG"),r=n("6CRC"),c=n("tyNb");const l=function(t){return{hidden:t}};let b=(()=>{class t{constructor(t,e){this.dialog=t,this.authService=e,this.isProfileDropdownShown=!1,this.patient=this.authService.currentUserValue}ngOnInit(){}showProfileDropdown(){this.isProfileDropdownShown=!0}hideProfileDropdown(){this.isProfileDropdownShown=!1}toggleProfileDropdown(){this.isProfileDropdownShown=!this.isProfileDropdownShown}showLogoutModal(){this.dialog.open(o.a,{width:"450px"})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.b),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-patient"]],decls:79,vars:4,consts:[[1,"bg-gray-100"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","items-center","justify-between","h-16"],[1,"flex","items-center"],["href","#",1,"flex","items-center","link-text-bd","text-gray-800"],[1,"sr-only"],[1,"pl-2","text-lg","text-green-900"],[1,"hidden","md:block"],[1,"ml-10","flex","items-baseline","space-x-4"],["routerLink","/patient",1,"text-base","text-gray-900","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/appointments",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/messages",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/account-settings",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/support",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["routerLink","/patient/nutrition-tools",1,"text-base","text-gray-900","hover:bg-green-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],[1,"ml-4","flex","items-center","md:ml-6"],[1,"ml-3","relative"],["id","user-menu","aria-haspopup","true",1,"max-w-xs","bg-gray-800","rounded-full","flex","items-center","text-sm","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white","object-cover",3,"click"],["alt","",1,"h-8","w-8","rounded-full","object-cover",3,"src"],["role","menu","aria-orientation","vertical","aria-labelledby","user-menu",1,"origin-top-right","absolute","right-0","mt-2","w-48","rounded-md","shadow-lg","py-1","bg-white","ring-1","ring-black","ring-opacity-5",3,"ngClass"],["routerLink","/patient/account-settings","role","menuitem",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100"],["role","menuitem",1,"cursor-pointer","block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"-mr-2","flex","md:hidden"],[1,"bg-gray-800","inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-400","hover:text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"hidden","md:hidden"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3"],["href","#",1,"bg-gray-900","text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],["href","#",1,"text-gray-300","hover:bg-gray-700","hover:text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],[1,"pt-4","pb-3","border-t","border-gray-700"],[1,"flex","items-center","px-5"],[1,"flex-shrink-0"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-10","w-10","rounded-full"],[1,"ml-3"],[1,"text-base","font-medium","leading-none","text-white"],[1,"text-sm","font-medium","leading-none","text-gray-400"],[1,"ml-auto","bg-gray-800","flex-shrink-0","p-1","rounded-full","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-offset-gray-800","focus:ring-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"mt-3","px-2","space-y-1"],["href","#",1,"block","px-3","py-2","rounded-md","text-base","font-medium","text-gray-400","hover:text-white","hover:bg-gray-700"]],template:function(t,e){1&t&&(a.Tb(0,"nav",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Tb(4,"a",4),a.Tb(5,"span",5),a.Dc(6,"Workflow"),a.Sb(),a.Tb(7,"h1",6),a.Dc(8," TeleNutrition.ph "),a.Sb(),a.Sb(),a.Tb(9,"div",7),a.Tb(10,"div",8),a.Tb(11,"a",9),a.Dc(12,"Dashboard"),a.Sb(),a.Tb(13,"a",10),a.Dc(14,"Appointments"),a.Sb(),a.Tb(15,"a",11),a.Dc(16,"Messages"),a.Sb(),a.Tb(17,"a",12),a.Dc(18,"Settings"),a.Sb(),a.Tb(19,"a",13),a.Dc(20,"Support"),a.Sb(),a.Tb(21,"a",14),a.Dc(22,"Nutrition Tools"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(23,"div",7),a.Tb(24,"div",15),a.Tb(25,"div",16),a.Tb(26,"div"),a.Tb(27,"button",17),a.ac("click",function(){return e.toggleProfileDropdown()}),a.Tb(28,"span",5),a.Dc(29,"Open user menu"),a.Sb(),a.Ob(30,"img",18),a.Sb(),a.Sb(),a.Tb(31,"div",19),a.Tb(32,"a",20),a.Dc(33,"Your Profile"),a.Sb(),a.Tb(34,"a",21),a.ac("click",function(){return e.showLogoutModal()}),a.Dc(35,"Sign out"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(36,"div",22),a.Tb(37,"button",23),a.Tb(38,"span",5),a.Dc(39,"Open main menu"),a.Sb(),a.dc(),a.Tb(40,"svg",24),a.Ob(41,"path",25),a.Sb(),a.Tb(42,"svg",26),a.Ob(43,"path",27),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.cc(),a.Tb(44,"div",28),a.Tb(45,"div",29),a.Tb(46,"a",30),a.Dc(47,"Dashboard"),a.Sb(),a.Tb(48,"a",31),a.Dc(49,"Team"),a.Sb(),a.Tb(50,"a",31),a.Dc(51,"Projects"),a.Sb(),a.Tb(52,"a",31),a.Dc(53,"Calendar"),a.Sb(),a.Tb(54,"a",31),a.Dc(55,"Reports"),a.Sb(),a.Sb(),a.Tb(56,"div",32),a.Tb(57,"div",33),a.Tb(58,"div",34),a.Ob(59,"img",35),a.Sb(),a.Tb(60,"div",36),a.Tb(61,"div",37),a.Dc(62,"Tom Cook"),a.Sb(),a.Tb(63,"div",38),a.Dc(64,"tom@example.com"),a.Sb(),a.Sb(),a.Tb(65,"button",39),a.Tb(66,"span",5),a.Dc(67,"View notifications"),a.Sb(),a.dc(),a.Tb(68,"svg",40),a.Ob(69,"path",41),a.Sb(),a.Sb(),a.Sb(),a.cc(),a.Tb(70,"div",42),a.Tb(71,"a",43),a.Dc(72,"Your Profile"),a.Sb(),a.Tb(73,"a",43),a.Dc(74,"Settings"),a.Sb(),a.Tb(75,"a",43),a.Dc(76,"Sign out"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(77,"main"),a.Ob(78,"router-outlet"),a.Sb()),2&t&&(a.Bb(30),a.lc("src",e.patient.profileImageURL?e.patient.profileImageURL:"assets/default.png",a.uc),a.Bb(1),a.kc("ngClass",a.oc(2,l,!e.isProfileDropdownShown)))},directives:[c.e,i.j,c.g],styles:[""]}),t})();var d=n("dNgK"),m=n("wd7m"),p=n("wd/R"),u=n("hoOL");function h(t,e){if(1&t&&(a.Tb(0,"div",10),a.Tb(1,"p",2),a.Dc(2," Sex: "),a.Tb(3,"strong"),a.Dc(4),a.Sb(),a.Sb(),a.Tb(5,"p",2),a.Dc(6," Age: "),a.Tb(7,"strong"),a.Dc(8),a.Sb(),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(4),a.Fc(" ",null==t.patient||null==t.patient.medicalRecord||null==t.patient.medicalRecord.sex?null:t.patient.medicalRecord.sex.toUpperCase().charAt(0)," "),a.Bb(4),a.Fc(" ",null==t.patient||null==t.patient.medicalRecord?null:t.patient.medicalRecord.age," years old")}}function f(t,e){1&t&&(a.Tb(0,"p",2),a.Dc(1," Please complete medical records. "),a.Sb())}function g(t,e){if(1&t&&(a.Tb(0,"div",11),a.Tb(1,"h1",12),a.Dc(2," Consultation "),a.Sb(),a.Tb(3,"p",13),a.Dc(4),a.Sb(),a.Tb(5,"p",14),a.Dc(6),a.Sb(),a.Sb()),2&t){const t=e.$implicit,n=a.ec();a.mc("routerLink","/patient/appointments/view/",t.id,""),a.Bb(4),a.Ec(t.appointmentType),a.Bb(2),a.Ec(n.moment(t.schedule).fromNow())}}let S=(()=>{class t{constructor(t,e,n){this.authService=t,this.patientService=e,this.appointmentService=n,this.patientS=this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{this.patient=t,console.log(this.patient.medicalRecord)}),this.moment=p,this.appointmentS=this.appointmentService.getArchivedAppointmentsByPatient(this.authService.currentUserValue.id).subscribe(t=>{this.appointments=t;for(const e of this.appointments)switch(e.appointmentType){case"one_week_cycle_menu":e.appointmentType="One Week Cycle Menu";break;case"both":e.appointmentType="One Week Cycle Menu + Nutrition Counseling";break;case"nutrition_counseling":e.appointmentType="Nutrition Counseling"}})}ngOnInit(){}ngOnDestroy(){this.patientS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(m.a),a.Nb(u.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-user-card"]],decls:16,vars:10,consts:[["alt","",1,"rounded-full","mx-auto","w-72","h-72","border-2","rounded-lg","object-cover",3,"src"],[1,"text-xl","font-medium","text-gray-700","text-center","pt-4"],[1,"text-base","text-gray-600","text-center"],["class","flex flex-row py-4 justify-around",4,"ngIf","ngIfElse"],["elseBlk",""],[1,"flex","flex-row","py-4"],[1,"text-base","font-bold","text-gray-700"],["routerLink","/patient/appointments/archived",1,"text-base","font-medium","ml-auto"],[1,"history"],["class","mt-2 px-4 py-2 bg-gray-200 shadow-sm rounded-md cursor-pointer hover:shadow-md hover:bg-gray-50 transition-all",3,"routerLink",4,"ngFor","ngForOf"],[1,"flex","flex-row","py-4","justify-around"],[1,"mt-2","px-4","py-2","bg-gray-200","shadow-sm","rounded-md","cursor-pointer","hover:shadow-md","hover:bg-gray-50","transition-all",3,"routerLink"],[1,"text-md","font-medium"],[1,"text-base"],[1,"text-sm","text-gray-400"]],template:function(t,e){if(1&t&&(a.Ob(0,"img",0),a.Tb(1,"h1",1),a.Dc(2),a.Sb(),a.Tb(3,"p",2),a.Dc(4," Patient "),a.Sb(),a.Bc(5,h,9,2,"div",3),a.Bc(6,f,2,0,"ng-template",null,4,a.Cc),a.Tb(8,"div",5),a.Tb(9,"h1",6),a.Dc(10," History "),a.Sb(),a.Tb(11,"a",7),a.Dc(12," See all "),a.Sb(),a.Sb(),a.Tb(13,"div",8),a.Bc(14,g,7,3,"div",9),a.fc(15,"slice"),a.Sb()),2&t){const t=a.rc(7);a.lc("src",null!=e.patient&&e.patient.profileImageURL?null==e.patient?null:e.patient.profileImageURL:"assets/default.png",a.uc),a.Bb(2),a.Gc(" ",null==e.patient?null:e.patient.firstName," ",null==e.patient?null:e.patient.lastName," "),a.Bb(3),a.kc("ngIf",null==e.patient?null:e.patient.medicalRecord)("ngIfElse",t),a.Bb(9),a.kc("ngForOf",a.hc(15,6,e.appointments,0,2))}},directives:[i.l,c.e,i.k,c.d],pipes:[i.t],styles:[""]}),t})(),v=(()=>{class t{constructor(t,e,n,i){this.authService=t,this.snackBar=e,this.patientService=n,this.router=i,this.authS=this.authService.currentUser.subscribe(t=>{(null==t?void 0:t.username)&&(this.patientS=this.patientService.getPatient(t.username).subscribe(t=>{this.patient=t,this.patient.medicalRecord||this.snackBar.open("Please complete your medical records","Okay go now. ",{duration:1e4}).onAction().subscribe(t=>{this.router.navigate(["/patient","medical-records"])})}))})}ngOnInit(){}ngOnDestroy(){this.patientS.unsubscribe(),this.authS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(d.a),a.Nb(m.a),a.Nb(c.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-dashboard"]],decls:32,vars:1,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"text-5xl","font-light","mt-8"],[1,"font-normal"],[1,"flex","flex-row"],[1,"grid","grid-cols-2","gap-6","mt-8","h-0","w-2/4"],["routerLink","/patient/medical-records",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/notes.png","alt","",1,"w-1/3","mx-auto"],[1,"text-lg","font-medium","text-gray-800","text-center","pt-4"],["routerLink","/patient/appointments/archived",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/history.png","alt","",1,"w-1/3","mx-auto"],["routerLink","/patient/book-an-appointment",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/calendar.png","alt","",1,"w-1/3","mx-auto"],["routerLink","/patient/nutrition-tools",1,"rounded","border","p-4","shadow-sm","hover:shadow-lg","transition-all"],["src","assets/pyramid.png","alt","",1,"w-1/3","mx-auto"],[1,"graphics"],["src","assets/graphics-2.png","alt","",1,"pl-10","w-10/12"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Dashboard "),a.Sb(),a.Tb(6,"h1",4),a.Dc(7," Hello, "),a.Tb(8,"span",5),a.Dc(9),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(10,"div",6),a.Tb(11,"div",7),a.Tb(12,"a",8),a.Ob(13,"img",9),a.Tb(14,"h1",10),a.Dc(15," Medical Records "),a.Sb(),a.Sb(),a.Tb(16,"a",11),a.Ob(17,"img",12),a.Tb(18,"h1",10),a.Dc(19," History "),a.Sb(),a.Sb(),a.Tb(20,"a",13),a.Ob(21,"img",14),a.Tb(22,"h1",10),a.Dc(23," Book an Appointment "),a.Sb(),a.Sb(),a.Tb(24,"a",15),a.Ob(25,"img",16),a.Tb(26,"h1",10),a.Dc(27," Nutrition Tools "),a.Sb(),a.Sb(),a.Sb(),a.Tb(28,"div",17),a.Ob(29,"img",18),a.Sb(),a.Sb(),a.Sb(),a.Tb(30,"div",19),a.Ob(31,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(9),a.Fc(" ",null==e.patient?null:e.patient.firstName,"! "))},directives:[c.e,c.d,S],styles:[""]}),t})();var T=n("3Pt+"),y=n("tk/3"),x=n("AytR"),w=n("7Cbv"),D=n("sINK"),B=n("kmnG"),k=n("qFsG"),C=n("iadO"),R=n("d3UM"),M=n("FKr1"),N=n("bTqV");function F(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",45),a.ac("click",function(){return a.tc(t),a.ec().edit()}),a.Dc(1),a.Sb()}if(2&t){const t=a.ec();a.Bb(1),a.Fc(" ",t.hasMedicalRecords?"Edit Medical Record":"Add Medical Record","")}}function O(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",46),a.ac("click",function(){return a.tc(t),a.ec().save()}),a.Dc(1),a.Sb()}if(2&t){const t=a.ec();a.kc("disabled",t.isSaving),a.Bb(1),a.Fc(" ",t.isSaving?"Saving changes...":"Save changes"," ")}}function A(t,e){if(1&t&&(a.Tb(0,"h1",47),a.Dc(1),a.Sb()),2&t){const t=a.ec();a.Bb(1),a.Fc(" ",t.bmiString,"")}}const I=function(t){return{"opacity-30":t}};function P(t,e){if(1&t&&(a.Tb(0,"a",48),a.Ob(1,"img",49),a.Sb()),2&t){const t=a.ec();a.lc("href",null==t.currentRecords?null:t.currentRecords.biochemicalResults,a.uc),a.Bb(1),a.lc("src",null!=t.currentRecords&&t.currentRecords.biochemicalResults?null==t.currentRecords?null:t.currentRecords.biochemicalResults:"assets/default.png",a.uc),a.kc("ngClass",a.oc(3,I,!t.isEditing||t.isSaving))}}let L=(()=>{class t{constructor(t,e,n,i,o){this.authService=t,this.fb=e,this.fileService=n,this.snackBar=i,this.patientService=o,this.isEditing=!1,this.isSaving=!1,this.isUploading=!1,this.filesToUpload=[],this.uploadedFilePaths=[],this.bmiString="",this.hasMedicalRecords=!1,this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{this.patient=t,this.patient.medicalRecord&&(this.hasMedicalRecords=!0,this.currentRecords=this.patient.medicalRecord,console.log("current records",this.currentRecords),this.initFormData()),console.log(this.patient)}),this.medicalRecordsForm=this.fb.group({age:new T.f({value:"",disabled:!0},T.x.required),birthday:new T.f({value:"",disabled:!0},T.x.required),religion:new T.f({value:"",disabled:!0},T.x.required),sex:new T.f({value:"",disabled:!0},T.x.required),height:new T.f({value:"",disabled:!0},T.x.required),weight:new T.f({value:"",disabled:!0},T.x.required),bmi:new T.f({value:"",disabled:!0},T.x.required),biochemicalResults:new T.f({value:"",disabled:!0},T.x.required),complaints:new T.f({value:"",disabled:!0},T.x.required),currentMedications:new T.f({value:"",disabled:!0},T.x.required)}),this.medicalRecordsForm.valueChanges.subscribe(t=>{console.log(t)})}initFormData(){this.medicalRecordsForm.patchValue({age:this.currentRecords.age,birthday:new Date(this.currentRecords.birthday),religion:this.currentRecords.religion,sex:this.currentRecords.sex,height:this.currentRecords.height,weight:this.currentRecords.weight,bmi:this.currentRecords.bmi,biochemicalResults:this.currentRecords.biochemicalResults,complaints:this.currentRecords.complaints,currentMedications:this.currentRecords.currentMedications})}ngOnInit(){window.onbeforeunload=()=>{confirm("u sure?")}}onSubmit(){}edit(){this.isEditing=!0,this.enable(),console.log(this.medicalRecordsForm.valid,this.medicalRecordsForm.value)}fileChange(t){if(this.isUploading=!0,0===t.length)return;const e=t[0],n=new FormData;n.append("file",e,w.a()+"."+e.type.split("/")[1]),setTimeout(()=>{this.fileService.upload(n).subscribe(t=>{if(t.type===y.d.UploadProgress);else if(t.type===y.d.Response){const e=`${x.a.apiUrl}/file/files/${t.body.path}`;this.medicalRecordsForm.patchValue({biochemicalResults:e}),this.isUploading=!1,this.snackBar.open("Uploaded!",null,{duration:2e3}),this.currentRecords={biochemicalResults:e}}},t=>{this.isUploading=!1,this.snackBar.open("Unexpected error occurred!",null,{duration:2e3})})},1e3)}enable(){this.medicalRecordsForm.get("age").enable(),this.medicalRecordsForm.get("birthday").enable(),this.medicalRecordsForm.get("religion").enable(),this.medicalRecordsForm.get("sex").enable(),this.medicalRecordsForm.get("height").enable(),this.medicalRecordsForm.get("weight").enable(),this.medicalRecordsForm.get("biochemicalResults").enable(),this.medicalRecordsForm.get("complaints").enable(),this.medicalRecordsForm.get("currentMedications").enable()}disable(){this.medicalRecordsForm.get("age").disable(),this.medicalRecordsForm.get("birthday").disable(),this.medicalRecordsForm.get("religion").disable(),this.medicalRecordsForm.get("sex").disable(),this.medicalRecordsForm.get("height").disable(),this.medicalRecordsForm.get("weight").disable(),this.medicalRecordsForm.get("biochemicalResults").disable(),this.medicalRecordsForm.get("complaints").disable(),this.medicalRecordsForm.get("currentMedications").disable()}update(){if(this.medicalRecordsForm.value.weight>0&&this.medicalRecordsForm.value.height>0){let t=parseInt(this.medicalRecordsForm.value.weight)/Math.pow(.01*this.medicalRecordsForm.value.height,2);t=Math.round(100*t)/100,this.medicalRecordsForm.patchValue({bmi:t}),t?t<17.5?this.bmiString="Underweight":t>=17.5&&t<=22.99?this.bmiString="Normal":t>=23&&t<=27.99?this.bmiString="Over weight":t>=28&&(this.bmiString="Obese"):this.bmiString=""}else console.log(this.medicalRecordsForm.value)}save(){this.disable(),this.isSaving=!0;const t={id:this.currentRecords.id?this.currentRecords.id:0,age:this.medicalRecordsForm.controls.age.value,birthday:p(this.medicalRecordsForm.controls.birthday.value).toISOString(),religion:this.medicalRecordsForm.controls.religion.value,sex:this.medicalRecordsForm.controls.sex.value,height:this.medicalRecordsForm.controls.height.value,weight:this.medicalRecordsForm.controls.weight.value,bmi:this.medicalRecordsForm.controls.bmi.value,biochemicalResults:this.medicalRecordsForm.controls.biochemicalResults.value,complaints:this.medicalRecordsForm.controls.complaints.value,currentMedications:this.medicalRecordsForm.controls.currentMedications.value};this.patient.medicalRecord=t,this.patient.roles=void 0,this.patient.appointments=void 0,console.log(t),setTimeout(()=>{this.patientService.updateMedicalRecords(this.patient).subscribe(t=>{this.patient=t,this.snackBar.open("Success!",null,{duration:2e3}),this.currentRecords=t.medicalRecord,this.isSaving=!1,this.isEditing=!1},t=>{this.snackBar.open("Unexpected Error Occured!",null,{duration:2e3}),console.log(t)})},600)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(T.e),a.Nb(D.a),a.Nb(d.a),a.Nb(m.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-medical-records"]],decls:90,vars:9,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"controls","flex","flex-row","justify-between","mt-6"],["type","submit","mat-raised-button","","color","accent","class","mb-6 mt-3",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","class","mb-6 mt-3",3,"disabled","click",4,"ngIf"],[1,"shadow-sm","rounded","border","p-4"],["autocomplete","off",1,"flex","flex-col","font-sans",3,"formGroup","ngSubmit"],[1,"text-lg","font-medium","text-gray-700"],[1,"grid","grid-cols-2","gap-2","mt-4","pt-4"],[1,"info","flex","flex-row"],["appearance","outline",1,"-mt-6","pb-0","flex-grow","text-base"],[1,"font-sans"],["type","number","min","1","matInput","","placeholder","Age","autocomplete","off","spellcheck","false","name","age","formControlName","age","required","",1,"pb-0","font-sans"],["matInput","","placeholder","mm/dd/yyyy","required","","name","birthday","formControlName","birthday",1,"font-sans",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","placeholder","Religion","autocomplete","off","spellcheck","false","name","religion","formControlName","religion","required","",1,"pb-0","font-sans"],["formControlName","sex","name","sex","placeholder","Sex",1,"font-sans"],["value","male",1,"font-sans"],["value","female",1,"font-sans"],[1,"text-lg","font-medium","text-gray-700","-mt-2"],[1,"text-base","text-gray-700","pb-4"],["type","number","matInput","","placeholder","Height (centimeters)","autocomplete","off","np","","spellcheck","false","name","height","formControlName","height","required","",1,"pb-0","font-sans",3,"keyup"],["type","number","matInput","","placeholder","Weight (kilograms)","autocomplete","off","spellcheck","false","name","weight","formControlName","weight","required","",1,"pb-0","font-sans",3,"keyup"],["appearance","outline",1,"-mt-6","pb-0","flex-grow"],["matInput","","placeholder","BMI","autocomplete","off","spellcheck","false","name","bmi","formControlName","bmi","required","",1,"pb-0","font-sans","text-base"],["clas","font-sans"],[1,"info","flex-row"],["class","text-base font-bold pl-2",4,"ngIf"],[1,"text-lg","mt-4","font-medium","text-gray-700"],[1,"flex","flex-col"],["type","button","mat-raised-button","","color","white",1,"mt-4","button","w-72","flex","flex-col",3,"disabled","click"],["type","file","accept",".png,.jpg,.jpeg,.pdf","placeholder","Choose file","multiple","",2,"display","none",3,"change"],["file",""],["class","w-56 h-56",3,"href",4,"ngIf"],[1,"text-lg","mt-4","font-medium","text-gray-700","pt-2"],[1,"grid","grid-cols-2","gap-2","mt-2"],[1,"flex","flex-row"],["appearance","outline",1,"flex-grow"],[1,"font-sans","text-base"],["rows","9","matInput","","formControlName","complaints","name","complaints",1,"font-sans","text-base"],["matInput","","formControlName","currentMedications","name","currentMedications","rows","9",1,"font-sans","text-base"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],["type","submit","mat-raised-button","","color","accent",1,"mb-6","mt-3",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"mb-6","mt-3",3,"disabled","click"],[1,"text-base","font-bold","pl-2"],[1,"w-56","h-56",3,"href"],["alt","",1,"my-4","w-56","h-56","shadow-lg","border","rounded-lg","object-cover",3,"ngClass","src"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Medical Records "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Bc(7,F,2,1,"button",5),a.Bc(8,O,2,2,"button",6),a.Sb(),a.Tb(9,"div",7),a.Tb(10,"form",8),a.ac("ngSubmit",function(){return e.onSubmit()}),a.Tb(11,"h1",9),a.Dc(12," Basic Information "),a.Sb(),a.Tb(13,"div",10),a.Tb(14,"div",11),a.Tb(15,"mat-form-field",12),a.Tb(16,"mat-label",13),a.Dc(17,"Age"),a.Sb(),a.Ob(18,"input",14),a.Sb(),a.Sb(),a.Tb(19,"div",11),a.Tb(20,"mat-form-field",12),a.Tb(21,"mat-label",13),a.Dc(22,"Birthday"),a.Sb(),a.Ob(23,"input",15),a.Ob(24,"mat-datepicker-toggle",16),a.Ob(25,"mat-datepicker",null,17),a.Sb(),a.Sb(),a.Tb(27,"div",11),a.Tb(28,"mat-form-field",12),a.Tb(29,"mat-label",13),a.Dc(30,"Religion"),a.Sb(),a.Ob(31,"input",18),a.Sb(),a.Sb(),a.Tb(32,"div",11),a.Tb(33,"mat-form-field",12),a.Tb(34,"mat-select",19),a.Tb(35,"mat-option",20),a.Dc(36," Male "),a.Sb(),a.Tb(37,"mat-option",21),a.Dc(38," Female "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(39,"h1",22),a.Dc(40," Anthropometric "),a.Sb(),a.Tb(41,"p",23),a.Dc(42," Ilagay ang iyong kasalukuyang timbang at tangkad. "),a.Sb(),a.Tb(43,"div",10),a.Tb(44,"div",11),a.Tb(45,"mat-form-field",12),a.Tb(46,"mat-label",13),a.Dc(47,"Height (cm)"),a.Sb(),a.Tb(48,"input",24),a.ac("keyup",function(){return e.update()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(49,"div",11),a.Tb(50,"mat-form-field",12),a.Tb(51,"mat-label",13),a.Dc(52,"Weight (kg)"),a.Sb(),a.Tb(53,"input",25),a.ac("keyup",function(){return e.update()}),a.Sb(),a.Sb(),a.Sb(),a.Tb(54,"div",11),a.Tb(55,"mat-form-field",26),a.Tb(56,"mat-label",13),a.Dc(57,"BMI"),a.Sb(),a.Ob(58,"input",27),a.Tb(59,"mat-hint",28),a.Dc(60,"BMI is automatically computed"),a.Sb(),a.Sb(),a.Sb(),a.Tb(61,"div",29),a.Bc(62,A,2,1,"h1",30),a.Sb(),a.Sb(),a.Tb(63,"h1",31),a.Dc(64," Biochemical "),a.Sb(),a.Tb(65,"p",23),a.Dc(66," I-upload ang resulta ng iyong mga laboratory tests at procedures na ginawa sa loob/labas ng ospital dito. "),a.Sb(),a.Tb(67,"div",32),a.Tb(68,"button",33),a.ac("click",function(){return a.tc(t),a.rc(71).click()}),a.Dc(69),a.Sb(),a.Tb(70,"input",34,35),a.ac("change",function(){a.tc(t);const n=a.rc(71);return e.fileChange(n.files)}),a.Sb(),a.Bc(72,P,2,5,"a",36),a.Sb(),a.Tb(73,"h1",37),a.Dc(74," Clinical "),a.Sb(),a.Tb(75,"p",23),a.Dc(76," Mangyaring ibahagi ang iyong mga nutrisyonal na problema (Chief Complaints) at kung merong mga iniinom na gamot para dito (Current Medications). "),a.Sb(),a.Tb(77,"div",38),a.Tb(78,"div",39),a.Tb(79,"mat-form-field",40),a.Tb(80,"mat-label",41),a.Dc(81,"Complaints"),a.Sb(),a.Ob(82,"textarea",42),a.Sb(),a.Sb(),a.Tb(83,"div",39),a.Tb(84,"mat-form-field",40),a.Tb(85,"mat-label",41),a.Dc(86,"Current Medications"),a.Sb(),a.Ob(87,"textarea",43),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(88,"div",44),a.Ob(89,"app-user-card"),a.Sb(),a.Sb()}if(2&t){const t=a.rc(26);a.Bb(7),a.kc("ngIf",!e.isEditing),a.Bb(1),a.kc("ngIf",e.isEditing),a.Bb(2),a.kc("formGroup",e.medicalRecordsForm),a.Bb(13),a.kc("matDatepicker",t),a.Bb(1),a.kc("for",t),a.Bb(38),a.kc("ngIf",e.bmiString),a.Bb(6),a.kc("disabled",!e.isEditing||e.isUploading),a.Bb(1),a.Fc("",null!=e.currentRecords&&e.currentRecords.biochemicalResults?e.isSaving?"Replacing file...":"Replace file":e.isSaving?"Attaching...":"Attach file"," "),a.Bb(3),a.kc("ngIf",null==e.currentRecords?null:e.currentRecords.biochemicalResults)}},directives:[i.l,T.y,T.r,T.i,B.b,B.f,T.u,k.b,T.c,T.q,T.h,T.w,C.b,C.d,B.g,C.a,R.a,M.m,B.e,N.a,c.d,S,i.j],styles:[""]}),t})();var U=n("42CH"),j=n("Pgs2");let H=(()=>{class t{constructor(t,e,n){this.supportService=t,this.authService=e,this.snackBar=n,this.isSubmitting=!1,this.details=""}ngOnInit(){}submit(){this.isSubmitting=!0,setTimeout(()=>{const t=new U.a;t.email=this.authService.currentUserValue.email,t.name=this.authService.currentUserValue.firstName+" "+this.authService.currentUserValue.lastName,t.details=this.details,this.supportService.createTicket(t).subscribe(t=>{t&&(this.isSubmitting=!1,this.snackBar.open("Submitted please check your email",void 0,{duration:5e3}))},t=>{this.snackBar.open("Unexpected Error Occurred!",void 0,{duration:5e3})})},1e3)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(j.a),a.Nb(r.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-support"]],decls:19,vars:3,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-col","py-4"],[1,"text-base"],[1,"text-sm","text-gray-600"],["appearance","outline",1,"mt-2"],[1,"font-sans"],["rows","8","matInput","",1,"font-sans",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button","","color","accent",1,"-mt-5","mb-2","text-base",3,"disabled","click"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Support "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"p",5),a.Dc(8," Having trouble? Please provide details of your problem. "),a.Sb(),a.Tb(9,"p",6),a.Dc(10," Please check your email for updates regarding your problem. If you can't find it, please check in your spam folder. "),a.Sb(),a.Tb(11,"mat-form-field",7),a.Tb(12,"mat-label",8),a.Dc(13,"Details of the problem"),a.Sb(),a.Tb(14,"textarea",9),a.ac("ngModelChange",function(t){return e.details=t}),a.Sb(),a.Sb(),a.Tb(15,"button",10),a.ac("click",function(){return e.submit()}),a.Dc(16),a.Sb(),a.Sb(),a.Sb(),a.Tb(17,"div",11),a.Ob(18,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(14),a.kc("ngModel",e.details),a.Bb(1),a.kc("disabled",e.isSubmitting||0===(null==e.details?null:e.details.length)),a.Bb(1),a.Fc(" ",e.isSubmitting?"Submitting...":"Submit"," "))},directives:[B.b,B.f,k.b,T.c,T.q,T.t,N.a,c.d,S],styles:[""]}),t})();var q=n("+0xr"),E=n("M9IT");function V(t,e){1&t&&(a.Tb(0,"th",16),a.Dc(1," No. "),a.Sb())}function $(t,e){if(1&t&&(a.Tb(0,"td",17),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Fc(" ",t.position," ")}}function G(t,e){1&t&&(a.Tb(0,"th",16),a.Dc(1," Name "),a.Sb())}function _(t,e){if(1&t&&(a.Tb(0,"td",17),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Fc(" ",t.name," ")}}function Q(t,e){1&t&&(a.Tb(0,"th",16),a.Dc(1," Weight "),a.Sb())}function W(t,e){if(1&t&&(a.Tb(0,"td",17),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Fc(" ",t.weight," ")}}function z(t,e){1&t&&(a.Tb(0,"th",16),a.Dc(1," Symbol "),a.Sb())}function K(t,e){if(1&t&&(a.Tb(0,"td",17),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Fc(" ",t.symbol," ")}}function Y(t,e){1&t&&a.Ob(0,"tr",18)}function J(t,e){1&t&&a.Ob(0,"tr",19)}const X=function(){return[5,10,20]};let Z=(()=>{class t{constructor(){this.displayedColumns=["position","name","weight","symbol"],this.dataSource=new q.k(tt)}ngAfterViewInit(){this.dataSource.paginator=this.paginator}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-history"]],viewQuery:function(t,e){if(1&t&&a.Ic(E.a,!0),2&t){let t;a.qc(t=a.bc())&&(e.paginator=t.first)}},decls:25,vars:6,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"shadow-sm","rounded","border","mt-4"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","weight"],["matColumnDef","symbol"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," History "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"table",5),a.Rb(8,6),a.Bc(9,V,2,0,"th",7),a.Bc(10,$,2,1,"td",8),a.Qb(),a.Rb(11,9),a.Bc(12,G,2,0,"th",7),a.Bc(13,_,2,1,"td",8),a.Qb(),a.Rb(14,10),a.Bc(15,Q,2,0,"th",7),a.Bc(16,W,2,1,"td",8),a.Qb(),a.Rb(17,11),a.Bc(18,z,2,0,"th",7),a.Bc(19,K,2,1,"td",8),a.Qb(),a.Bc(20,Y,1,0,"tr",12),a.Bc(21,J,1,0,"tr",13),a.Sb(),a.Ob(22,"mat-paginator",14),a.Sb(),a.Sb(),a.Tb(23,"div",15),a.Ob(24,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(7),a.kc("dataSource",e.dataSource),a.Bb(13),a.kc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.kc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.kc("pageSizeOptions",a.nc(5,X))("pageSize",10))},directives:[q.j,q.c,q.e,q.b,q.g,q.i,E.a,c.d,S,q.d,q.a,q.f,q.h],styles:[""]}),t})();const tt=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"},{position:11,name:"Sodium",weight:22.9897,symbol:"Na"},{position:12,name:"Magnesium",weight:24.305,symbol:"Mg"},{position:13,name:"Aluminum",weight:26.9815,symbol:"Al"},{position:14,name:"Silicon",weight:28.0855,symbol:"Si"},{position:15,name:"Phosphorus",weight:30.9738,symbol:"P"},{position:16,name:"Sulfur",weight:32.065,symbol:"S"},{position:17,name:"Chlorine",weight:35.453,symbol:"Cl"},{position:18,name:"Argon",weight:39.948,symbol:"Ar"},{position:19,name:"Potassium",weight:39.0983,symbol:"K"},{position:20,name:"Calcium",weight:40.078,symbol:"Ca"}];var et=n("xHqg");function nt(t,e){1&t&&a.Dc(0,"Select your preferred date")}function it(t,e){1&t&&a.Dc(0,"Select your appointment time")}function ot(t,e){if(1&t&&(a.Tb(0,"mat-option",48),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t.value),a.Bb(1),a.Fc(" ",t.display," ")}}function at(t,e){1&t&&a.Dc(0,"Service to Avail")}function st(t,e){1&t&&a.Dc(0,"Fill out information")}function rt(t,e){1&t&&a.Dc(0,"Payment")}function ct(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",50),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Dc(5," Bank of the Philippine Islands "),a.Sb(),a.Tb(6,"p"),a.Dc(7," Branch: Lipa Poblacion, Lipa City Batangas"),a.Sb(),a.Tb(8,"p"),a.Dc(9," Account Number: "),a.Tb(10,"span",53),a.Dc(11,"9011-0017-15"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Dc(13," Account Type: Current Account"),a.Sb(),a.Tb(14,"p"),a.Dc(15," Swift Code: BOPIPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function lt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",54),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Dc(5," Metropolitan Bank & Trust Company"),a.Sb(),a.Tb(6,"p"),a.Dc(7," Branch: B. Morada Lipa City, Barangas"),a.Sb(),a.Tb(8,"p"),a.Dc(9," Account Number: "),a.Tb(10,"span",53),a.Dc(11,"145-3-14503985-2"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Dc(13," Account Type: Savings Account"),a.Sb(),a.Tb(14,"p"),a.Dc(15," Swift Code: MBTCPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function bt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Ob(2,"img",55),a.Tb(3,"div",51),a.Tb(4,"h1",52),a.Dc(5," Union Bank "),a.Sb(),a.Tb(6,"p"),a.Dc(7," Branch: Lipa Branch, Lipa City Batangas"),a.Sb(),a.Tb(8,"p"),a.Dc(9," Account Number: "),a.Tb(10,"span",53),a.Dc(11,"002660003598"),a.Sb(),a.Sb(),a.Tb(12,"p"),a.Dc(13," Account Type: Savings Account"),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function dt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Tb(2,"div",56),a.Ob(3,"img",57),a.Sb(),a.Tb(4,"div",51),a.Tb(5,"h1",52),a.Dc(6," Banco De Oro"),a.Sb(),a.Tb(7,"p"),a.Dc(8," Branch: Ayala Highway, Lipa City Batangas"),a.Sb(),a.Tb(9,"p"),a.Dc(10," Account Number: "),a.Tb(11,"span",53),a.Dc(12,"1880141440"),a.Sb(),a.Sb(),a.Tb(13,"p"),a.Dc(14," Account Type: Savings Account"),a.Sb(),a.Tb(15,"p"),a.Dc(16," Swift Code: BNORTHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function mt(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",49),a.Tb(2,"div",51),a.Tb(3,"h1",52),a.Dc(4," On Site Payment "),a.Sb(),a.Tb(5,"p"),a.Dc(6," Proceed to the Weight Management Center for encoding and payment instructions. "),a.Sb(),a.Tb(7,"p"),a.Dc(8," We are open from "),a.Tb(9,"span",58),a.Dc(10," 6 AM - 6 PM "),a.Sb(),a.Dc(11,"everyday "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}const pt=function(){return[0]},ut=function(){return[1]},ht=function(){return[2]},ft=function(){return[3]},gt=function(){return[4]};function St(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",7),a.ac("ngSubmit",function(){return a.tc(t),a.ec().onSubmit()}),a.Tb(1,"mat-vertical-stepper",8),a.Tb(2,"mat-step",9),a.Bc(3,nt,1,0,"ng-template",10),a.Tb(4,"mat-form-field",11),a.Tb(5,"mat-label",12),a.Dc(6,"Appointment Date"),a.Sb(),a.Ob(7,"input",13),a.Ob(8,"mat-datepicker-toggle",14),a.Ob(9,"mat-datepicker",null,15),a.Sb(),a.Tb(11,"div"),a.Tb(12,"button",16),a.Dc(13,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(14,"mat-step",17),a.Bc(15,it,1,0,"ng-template",10),a.Tb(16,"p",18),a.Dc(17," Listed time options are based on your selected date. "),a.Sb(),a.Tb(18,"mat-form-field",19),a.Tb(19,"mat-label",12),a.Dc(20,"Appointment Time"),a.Sb(),a.Tb(21,"mat-select",20),a.Bc(22,ot,2,2,"mat-option",21),a.Sb(),a.Sb(),a.Tb(23,"div"),a.Tb(24,"button",22),a.Dc(25,"Back"),a.Sb(),a.Tb(26,"button",16),a.Dc(27,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(28,"mat-step",23),a.Bc(29,at,1,0,"ng-template",24),a.Tb(30,"mat-form-field",25),a.Tb(31,"mat-select",26),a.ac("valueChange",function(e){return a.tc(t),a.ec().selectedAppointmentType=e}),a.Tb(32,"mat-option",27),a.Dc(33," Nutrition Counseling "),a.Sb(),a.Tb(34,"mat-option",28),a.Dc(35," One Week Cycle Menu "),a.Sb(),a.Tb(36,"mat-option",29),a.Dc(37," Nutrition Counseling & One Week Cycle Menu "),a.Sb(),a.Sb(),a.Sb(),a.Tb(38,"div"),a.Tb(39,"button",30),a.Dc(40,"Back"),a.Sb(),a.Tb(41,"button",31),a.Dc(42,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(43,"mat-step",32),a.Bc(44,st,1,0,"ng-template",24),a.Tb(45,"div",33),a.Tb(46,"mat-form-field",11),a.Tb(47,"mat-label",12),a.Dc(48,"Complains"),a.Sb(),a.Ob(49,"textarea",34),a.Sb(),a.Tb(50,"mat-form-field",35),a.Tb(51,"mat-label",12),a.Dc(52,"Current Medications"),a.Sb(),a.Ob(53,"textarea",36),a.Sb(),a.Sb(),a.Tb(54,"div"),a.Tb(55,"button",30),a.Dc(56,"Back"),a.Sb(),a.Tb(57,"button",31),a.Dc(58,"Next"),a.Sb(),a.Sb(),a.Sb(),a.Tb(59,"mat-step",37),a.Bc(60,rt,1,0,"ng-template",24),a.Tb(61,"p",38),a.Dc(62,"You can choose to settle your account through the following bank to bank options"),a.Sb(),a.Tb(63,"div",39),a.Bc(64,ct,16,0,"div",40),a.Bc(65,lt,16,0,"div",40),a.Bc(66,bt,14,0,"div",40),a.Bc(67,dt,17,0,"div",40),a.Bc(68,mt,12,0,"div",40),a.Sb(),a.Tb(69,"mat-form-field",25),a.Tb(70,"mat-select",41),a.ac("valueChange",function(e){return a.tc(t),a.ec().selected=e}),a.Tb(71,"mat-option",42),a.Dc(72," BPI "),a.Sb(),a.Tb(73,"mat-option",43),a.Dc(74," Union Bank "),a.Sb(),a.Tb(75,"mat-option",44),a.Dc(76," Metrobank "),a.Sb(),a.Tb(77,"mat-option",45),a.Dc(78," BDO "),a.Sb(),a.Tb(79,"mat-option",46),a.Dc(80," On Site Payment "),a.Sb(),a.Sb(),a.Sb(),a.Tb(81,"div"),a.Tb(82,"button",47),a.Dc(83),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.rc(10),e=a.ec();a.kc("formGroup",e.formGroup),a.Bb(1),a.kc("linear",!0),a.Bb(1),a.kc("stepControl",e.formArray.get(a.nc(22,pt))),a.Bb(5),a.kc("matDatepicker",t)("matDatepickerFilter",e.dateFilter)("min",e.todayDate),a.Bb(1),a.kc("for",t),a.Bb(6),a.kc("stepControl",e.formArray.get(a.nc(23,ut))),a.Bb(8),a.kc("ngForOf",e.times),a.Bb(6),a.kc("stepControl",e.formArray.get(a.nc(24,ht))),a.Bb(3),a.kc("value",e.selectedAppointmentType),a.Bb(12),a.kc("stepControl",e.formArray.get(a.nc(25,ft))),a.Bb(16),a.kc("stepControl",e.formArray.get(a.nc(26,gt))),a.Bb(4),a.kc("ngSwitch",e.selected),a.Bb(1),a.kc("ngSwitchCase","bpi"),a.Bb(1),a.kc("ngSwitchCase","metro"),a.Bb(1),a.kc("ngSwitchCase","union"),a.Bb(1),a.kc("ngSwitchCase","bdo"),a.Bb(1),a.kc("ngSwitchCase","on_site"),a.Bb(2),a.kc("value",e.selected),a.Bb(12),a.kc("disabled",e.isSubmitting||!e.formGroup.valid),a.Bb(1),a.Ec(e.isSubmitting?"Submitting..":"Submit")}}function vt(t,e){if(1&t&&(a.Tb(0,"div",59),a.Tb(1,"h1",60),a.Dc(2," Appointment Summary "),a.Sb(),a.Tb(3,"p",61),a.Dc(4," Status: "),a.Tb(5,"span"),a.Dc(6),a.Sb(),a.Sb(),a.Tb(7,"p",62),a.Dc(8," Appointment Schedule "),a.Sb(),a.Tb(9,"p",61),a.Dc(10),a.Sb(),a.Tb(11,"p",62),a.Dc(12," Payment Method "),a.Sb(),a.Tb(13,"p",61),a.Dc(14),a.Sb(),a.Tb(15,"p",62),a.Dc(16," Amount Due "),a.Sb(),a.Tb(17,"p",61),a.Dc(18),a.Sb(),a.Tb(19,"p",61),a.Dc(20," Please wait for the total price of your session to reflect in your appointment\u2019s summary page"),a.Sb(),a.Sb()),2&t){const t=a.ec();a.kc("routerLink","./appointments/view/"+t.resultId),a.Bb(6),a.Fc(" ",t.appointment.status," "),a.Bb(4),a.Fc(" ",t.moment(t.appointment.schedule).format("LLL")," "),a.Bb(4),a.Fc(" ",t.appointment.paymentMethod.toUpperCase(),""),a.Bb(4),a.Fc(" ",0===t.appointment.amountDue?"TBD":t.appointment.amountDue," ")}}let Tt=(()=>{class t{constructor(t,e,n,i,o){this.formBuilder=t,this.patientService=e,this.authService=n,this.appointmentService=i,this.snackBar=o,this.isLinear=!1,this.todayDate=new Date,this.isSubmitting=!1,this.result="",this.times=[{display:"10:00 AM",value:"10:00"},{display:"11:00 AM",value:"11:00"},{display:"12:00 PM",value:"12:00"},{display:"1:00 PM",value:"13:00"},{display:"2:00 PM",value:"14:00"},{display:"3:00 PM",value:"15:00"},{display:"4:00 PM",value:"16:00"},{display:"5:00 PM",value:"17:00"},{display:"6:00 PM",value:"18:00"}],this.selected="",this.selectedAppointmentType="",this.dateFilter=t=>{const e=(t||new Date).getDay();return null===t&&(t=new Date),0!==e&&6!==e},this.moment=p,this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{var e,n;this.patient=t,this.formArray.controls[3].patchValue({complaints:null===(e=t.medicalRecord)||void 0===e?void 0:e.complaints,currentMedications:null===(n=t.medicalRecord)||void 0===n?void 0:n.currentMedications})})}ngOnInit(){this.formArray=this.formBuilder.array([this.formBuilder.group({appointmentDate:["",T.x.required]}),this.formBuilder.group({appointmentTime:["",T.x.required]}),this.formBuilder.group({appointmentType:["",T.x.required]}),this.formBuilder.group({complaints:["",T.x.required],currentMedications:["",T.x.required]}),this.formBuilder.group({paymentMethod:["",T.x.required]})]),this.formGroup=this.formBuilder.group({formArray:this.formArray}),this.formGroup.valueChanges.subscribe(t=>{console.log(this.formGroup.valid)})}onSubmit(){this.isSubmitting=!0;const t=this.formArray.value.reduce((t,e)=>{const n=Object.assign({},e);return Object.keys(n).forEach(e=>{t[e]?Object.assign(t[e],n[e]):t[e]=n[e]}),t},{});console.log(t),t.appointmentDate=p(t.appointmentDate).format("L");const e={patient:{id:this.authService.currentUserValue.id},complaints:t.complaints,currentMedications:t.currentMedications,paymentMethod:t.paymentMethod,appointmentType:t.appointmentType,amountDue:t.amountDue,schedule:p(`${t.appointmentDate} ${t.appointmentTime}`,"MM/DD/YYYY HH:mm").format()};console.log(e),setTimeout(()=>{this.appointmentService.createAppointment(e).subscribe(t=>{t&&(this.result="success",this.isSubmitting=!1,this.snackBar.open("Success!",void 0,{duration:3e3}),this.appointment=t,this.resultId=t.id)},t=>{this.result="error",this.isSubmitting=!1})},800)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(T.e),a.Nb(m.a),a.Nb(r.a),a.Nb(u.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-book-an-appointment"]],decls:10,vars:2,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","mb-4","leading-tight","text-gray-900"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","summary p-6 border rounded shadow-sm hover:shadow-md outline-none cursor-pointer",3,"routerLink",4,"ngIf"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],[3,"formGroup","ngSubmit"],["formArrayName","formArray",3,"linear"],["formGroupName","0",1,"font-sans",3,"stepControl"],["matStepLabel","","class","font-sans"],["appearance","outline"],[1,"font-sans"],["matInput","","placeholder","mm/dd/yyyy","required","","name","appointmentDate","formControlName","appointmentDate",1,"font-sans",3,"matDatepicker","matDatepickerFilter","min"],["matSuffix","",3,"for"],["picker",""],["type","button","mat-button","","matStepperNext","",1,"font-sans"],["formGroupName","1",3,"stepControl"],[1,"text-base","pt-4"],["appearance","outline",1,"mt-4","font-sans"],["formControlName","appointmentTime","name","appointmentTime",1,"font-sans"],["class","font-sans",3,"value",4,"ngFor","ngForOf"],["type","button","mat-button","","matStepperPrevious","",1,"font-sans"],["formGroupName","2",3,"stepControl"],["matStepLabel",""],["appearance","outline",1,"mt-4","w-1/3"],["formControlName","appointmentType","name","appointmentType","placeholder","Select Service To Avail",1,"font-sans",3,"value","valueChange"],["value","nutrition_counseling",1,"font-sans"],["value","one_week_cycle_menu",1,"font-sans"],["value","both",1,"font-sans"],["type","button","mat-button","","matStepperPrevious",""],["type","button","mat-button","","matStepperNext",""],["formGroupName","3",3,"stepControl"],[1,"flex","flex-col","w-1/3","mt-2"],["rows","8","matInput","","formControlName","complaints","name","complaints",1,"font-sans"],["appearance","outline",1,"mt-1"],["rows","5","matInput","","formControlName","currentMedications","name","currentMedications",1,"font-sans"],["formGroupName","4",3,"stepControl"],[1,"mt-2"],[1,"my-2",3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","paymentMethod","name","paymentMethod","placeholder","Select Payment Method",1,"font-sans",3,"value","valueChange"],["value","bpi",1,"font-sans"],["value","union",1,"font-sans"],["value","metro",1,"font-sans"],["value","bdo",1,"font-sans"],["value","on_site",1,"font-sans"],["type","submit","mat-raised-button","","color","accent",1,"mt-2",3,"disabled"],[1,"font-sans",3,"value"],[1,"flex","flex-row"],["src","/assets/bpi.png","alt","",1,"h-12","mr-6"],[1,"info"],[1,"text-lg","font-medium","text-gray-800"],[1,"font-bold","primary"],["src","/assets/metro.png","alt","",1,"h-12","mr-6"],["src","/assets/unionbank.png","alt","",1,"h-12","mr-6"],[1,"image","min-w-lg","max-w-lg"],["src","/assets/bdo.png","alt","",1,"h-14","mr-6"],[1,"font-bold"],[1,"summary","p-6","border","rounded","shadow-sm","hover:shadow-md","outline-none","cursor-pointer",3,"routerLink"],[1,"text-xl","font-medium","mb-2","pb-2","border-b"],[1,"text-lg","font-medium"],[1,"text-base","font-medium","text-gray-500","mt-2"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Book an Appointment "),a.Sb(),a.Sb(),a.Sb(),a.Bc(6,St,84,27,"form",4),a.Bc(7,vt,21,5,"div",5),a.Sb(),a.Tb(8,"div",6),a.Ob(9,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(6),a.kc("ngIf",!e.result),a.Bb(1),a.kc("ngIf","success"===e.result))},directives:[i.l,c.d,S,T.y,T.r,T.i,et.f,T.d,et.a,T.j,et.b,B.b,B.f,k.b,T.c,C.b,T.w,T.q,T.h,C.d,B.g,C.a,N.a,et.d,R.a,i.k,et.e,M.m,i.n,i.o],styles:[""]}),t})();var yt=n("6fmo");function xt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",9),a.ac("click",function(){a.tc(t);const n=e.$implicit;return a.ec(2).showAgeGroupComp(n.value)}),a.Ob(1,"img",10),a.Tb(2,"p",11),a.Dc(3),a.Tb(4,"span",12),a.Dc(5),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,n=a.ec(2);a.Bb(3),a.Fc(" ",t.key," "),a.Bb(2),a.Fc(" ",n.sum(t.value)," DOWNLOADS")}}function wt(t,e){if(1&t&&(a.Tb(0,"div",7),a.Bc(1,xt,6,2,"div",8),a.fc(2,"keyvalue"),a.Sb()),2&t){const t=a.ec();a.kc("hidden",t.showAgeGroup),a.Bb(1),a.kc("ngForOf",a.gc(2,2,t.nts))}}function Dt(t,e){if(1&t&&(a.Tb(0,"a",15),a.Ob(1,"img",16),a.Tb(2,"p",11),a.Dc(3),a.Tb(4,"span",12),a.Dc(5),a.Sb(),a.Sb(),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.lc("href",n.environment.apiRoot+"/api/nt/get/"+t.id,a.uc),a.Bb(3),a.Fc(" ",t.filename.split("___")[0]," "),a.Bb(2),a.Fc(" ",t.hits," DOWNLOADS")}}function Bt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div"),a.Tb(1,"button",13),a.ac("click",function(){return a.tc(t),a.ec().back()}),a.Dc(2," Back "),a.Sb(),a.Bc(3,Dt,6,3,"a",14),a.Sb()}if(2&t){const t=a.ec();a.Bb(3),a.kc("ngForOf",t.currentFolder)}}let kt=(()=>{class t{constructor(t){this.nutritionToolsService=t,this.showAgeGroup=!1,this.nutritionToolsService.getAllNutritionTools().subscribe(t=>{t&&(this.nutritionTools=t,this.nts=this.nutritionTools.reduce((t,e)=>{const n=t[e.folder]||[];return n.push(e),t[e.folder]=n,t},{}),console.log(this.nts))}),this.environment=x.a}ngOnInit(){}groupBy(t,e){let n,i,o=0;const a=[],s=[];for(;o<t.length;o++)n=t[o][e],i=a.indexOf(n),i>-1?s[i].push(t[o]):(a.push(n),s.push([t[o]]));return s}sum(t){console.log(t);let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].hits;return e}showAgeGroupComp(t){this.showAgeGroup=!0,this.currentFolder=t}back(){this.showAgeGroup=!1}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(yt.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-nutrition-tools"]],decls:10,vars:2,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],["class","shadow-sm rounded border mt-4 p-4",3,"hidden",4,"ngIf"],[4,"ngIf"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],[1,"shadow-sm","rounded","border","mt-4","p-4",3,"hidden"],["class","flex flex-row p-2 text-base font-medium shadow-sm hover:shadow-lg rounded-md cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"flex","flex-row","p-2","text-base","font-medium","shadow-sm","hover:shadow-lg","rounded-md","cursor-pointer",3,"click"],["src","/assets/folder.png","alt","",1,"w-12","h-12","mr-4"],[1,"text-sm","align-middle","justify-self-center","self-center","font-medium","text-gray-700","pt-2"],[1,"text-gray-400","mx-4"],["mat-raised-button","","color","accent",1,"mb-6","mt-3",3,"click"],["class","flex flex-row p-2 text-base font-medium shadow-sm hover:shadow-lg rounded-md cursor-pointer",3,"href",4,"ngFor","ngForOf"],[1,"flex","flex-row","p-2","text-base","font-medium","shadow-sm","hover:shadow-lg","rounded-md","cursor-pointer",3,"href"],["src","/assets/pdf.png","alt","",1,"w-12","h-12","mr-4"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Nutrition Tools "),a.Sb(),a.Sb(),a.Sb(),a.Bc(6,wt,3,4,"div",4),a.Bc(7,Bt,4,1,"div",5),a.Sb(),a.Tb(8,"div",6),a.Ob(9,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(6),a.kc("ngIf",e.nutritionTools),a.Bb(1),a.kc("ngIf",e.showAgeGroup))},directives:[i.l,c.d,S,i.k,N.a],pipes:[i.f],styles:[""]}),t})();function Ct(t,e){1&t&&(a.Tb(0,"li",23),a.Dc(1," Password too weak "),a.Sb())}function Rt(t,e){1&t&&(a.Tb(0,"li",23),a.Dc(1," Password doesn't match "),a.Sb())}let Mt=(()=>{class t{constructor(t,e,n,i){this.fb=t,this.patientService=e,this.authService=n,this.fileService=i,this.submitting=!1,this.updateResult="",this.errorMessage="",this.isLinear=!0,this.progress=0,this.message="",this.updateForm=this.fb.group({contactNumber:[this.authService.currentUserValue.contactNumber,[T.x.required,T.x.min(11)]],password:["",[T.x.required,this.passwordValidator2(),this.passwordStrengthValidator()]],passwordConfirm:new T.f("",this.passwordValidator())}),this.patient=this.authService.currentUserValue,console.log(this.patient)}uploadFile(t){if(console.log(t),0===t.length)return;const e=t[0],n=new FormData;n.append("file",e,w.a()+"."+e.type.split("/")[1]),this.fileServiceS=this.fileService.upload(n).subscribe(t=>{t.type===y.d.UploadProgress?this.progress=Math.round(100*t.loaded/t.total):t.type===y.d.Response&&(this.message="Upload success.",this.patient.profileImageURL=`${x.a.apiUrl}/file/files/${t.body.path}`,this.patient.roles=void 0,this.patient.appointments=void 0,this.patientService.updatePhoto(this.patient).subscribe(t=>{console.log(t),t&&this.authService.updateUser(t)}))})}fileChange(t){this.uploadFile(t)}ngOnInit(){}onSubmit(){this.submitting=!0;const t={contactNumber:this.updateForm.value.contactNumber,password:this.updateForm.value.password,username:this.authService.currentUserValue.username};setTimeout(()=>{this.patientServiceS=this.patientService.updateAccount(t).subscribe(t=>{t&&(this.submitting=!1,this.updateResult="success")},t=>{this.submitting=!1,this.updateResult="error",console.log(t),this.errorMessage=t.message})},900)}passwordValidator2(){return t=>{var e,n;return(null===(e=this.updateForm)||void 0===e?void 0:e.controls.passwordConfirm.value.length)>0?t.value===(null===(n=this.updateForm)||void 0===n?void 0:n.controls.passwordConfirm.value)?null:{passwordMismatch:t.value}:null}}passwordValidator(){return t=>{var e;return t.value===(null===(e=this.updateForm)||void 0===e?void 0:e.controls.password.value)?null:{passwordMismatch:t.value}}}passwordStrengthValidator(){const t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$");return e=>t.test(e.value)?null:{passwordStrength:e.value}}pwKeyup(){this.updateForm.controls.password.updateValueAndValidity()}ngOnDestroy(){this.patientServiceS&&this.patientServiceS.unsubscribe(),this.fileServiceS&&this.fileServiceS.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(T.e),a.Nb(m.a),a.Nb(r.a),a.Nb(D.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-account-settings"]],decls:36,vars:6,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-row","mt-4"],[1,"form","w-1/2"],["autocomplete","off",1,"flex","flex-col","font-sans",3,"formGroup","ngSubmit"],[1,"errors","list-disc","mx-4","transition-all"],["class","text-red-800 font-medium py-2",4,"ngIf"],[1,"text-xl","font-medium","text-gray-800","mt-8"],["appearance","outline",1,"mt-4"],[1,"font-sans"],["matInput","","placeholder","Ex: 09123456789","type","tel","minlength","11","maxlength","11","autocomplete","off","spellcheck","false","required","","formControlName","contactNumber",1,"font-sans"],["appearance","outline",1,"-mt-4"],["matInput","","placeholder","Password","type","password","autocomplete","off","spellcheck","false","required","","formControlName","password",1,"font-sans"],["appearance","outline"],["matInput","","placeholder","Re-type Password","type","password","autocomplete","off","spellcheck","false","required","","formControlName","passwordConfirm",1,"font-sans",3,"keyup"],["type","submit","mat-raised-button","","color","primary",1,"-mt-4","mb-2",3,"disabled"],[1,"w-1/2","px-8"],["alt","",1,"my-4","w-72","h-72","shadow-lg","border","rounded-lg","object-cover",3,"src"],["type","file","accept",".png,.jpg,.jpeg","placeholder","Choose file",2,"display","none",3,"change"],["file",""],["type","button","mat-raised-button","","color","accent",1,"button","-mt-2","w-72",3,"click"],[1,"text-red-800","font-medium","py-2"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Account Settings "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"div",5),a.Tb(8,"form",6),a.ac("ngSubmit",function(){return e.onSubmit()}),a.Tb(9,"ul",7),a.Bc(10,Ct,2,0,"li",8),a.Bc(11,Rt,2,0,"li",8),a.Sb(),a.Tb(12,"h1",9),a.Dc(13," Change "),a.Sb(),a.Tb(14,"mat-form-field",10),a.Tb(15,"mat-label",11),a.Dc(16,"Contact Number"),a.Sb(),a.Ob(17,"input",12),a.Sb(),a.Tb(18,"mat-form-field",13),a.Tb(19,"mat-label",11),a.Dc(20,"Password"),a.Sb(),a.Ob(21,"input",14),a.Tb(22,"mat-hint"),a.Dc(23,"8 characters minimum, atleast one uppercase, one lowercase and one number. "),a.Sb(),a.Sb(),a.Tb(24,"mat-form-field",15),a.Tb(25,"mat-label",11),a.Dc(26,"Confirm Password"),a.Sb(),a.Tb(27,"input",16),a.ac("keyup",function(){return e.pwKeyup()}),a.Sb(),a.Sb(),a.Tb(28,"button",17),a.Dc(29),a.Sb(),a.Sb(),a.Sb(),a.Tb(30,"div",18),a.Ob(31,"img",19),a.Tb(32,"input",20,21),a.ac("change",function(){a.tc(t);const n=a.rc(33);return e.fileChange(n.files)}),a.Sb(),a.Tb(34,"button",22),a.ac("click",function(){return a.tc(t),a.rc(33).click()}),a.Dc(35,"Update Photo"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()}2&t&&(a.Bb(8),a.kc("formGroup",e.updateForm),a.Bb(2),a.kc("ngIf",null==e.updateForm.controls.password.errors?null:e.updateForm.controls.password.errors.passwordStrength),a.Bb(1),a.kc("ngIf",null==e.updateForm.controls.password.errors?null:e.updateForm.controls.password.errors.passwordMismatch),a.Bb(17),a.kc("disabled",e.submitting||!e.updateForm.valid),a.Bb(1),a.Ec(e.submitting?"Saving Changes..":"Save Changes"),a.Bb(2),a.lc("src",e.patient.profileImageURL?e.patient.profileImageURL:"assets/default.png",a.uc))},directives:[T.y,T.r,T.i,i.l,B.b,B.f,k.b,T.c,T.m,T.l,T.w,T.q,T.h,B.e,N.a],styles:[""]}),t})();var Nt=n("Dh3D"),Ft=n("VRyK"),Ot=n("LRne"),At=n("JX91"),It=n("eIep"),Pt=n("lJxs"),Lt=n("JIr8"),Ut=n("vCrC");function jt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Schedule"),a.Sb())}function Ht(t,e){if(1&t&&(a.Tb(0,"td",31),a.Dc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec();a.Bb(1),a.Ec(n.moment(t.schedule).format("LLL"))}}function qt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Appointment Type"),a.Sb())}function Et(t,e){if(1&t&&(a.Tb(0,"td",32),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(t.appointmentType)}}function Vt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Payment Method"),a.Sb())}function $t(t,e){if(1&t&&(a.Tb(0,"td",33),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(t.paymentMethod.toUpperCase())}}function Gt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Amount Due"),a.Sb())}function _t(t,e){if(1&t&&(a.Tb(0,"td",32),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(0===t.amountDue?"Pending":"\u20b1"+t.amountDue)}}function Qt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Status"),a.Sb())}const Wt=function(t,e){return{"text-red-900":t,"font-medium":e}};function zt(t,e){if(1&t&&(a.Tb(0,"td",34),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("ngClass",a.pc(2,Wt,!t.approved,!t.approved)),a.Bb(1),a.Ec(t.status)}}function Kt(t,e){1&t&&(a.Tb(0,"th",30),a.Dc(1,"Assigned RND"),a.Sb())}function Yt(t,e){if(1&t&&(a.Tb(0,"td",33),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(t.rnd?t.rnd.firstName:"Pending")}}function Jt(t,e){1&t&&(a.Tb(0,"th",35),a.Dc(1," Updated At "),a.Sb())}function Xt(t,e){if(1&t&&(a.Tb(0,"td",31),a.Dc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(t.updatedAt)}}function Zt(t,e){1&t&&a.Ob(0,"th",30)}function te(t,e){if(1&t&&(a.Tb(0,"a",39),a.Dc(1,"Download Meal Plan "),a.Sb()),2&t){const t=a.ec().$implicit;a.lc("href",t.mealPlan,a.uc)}}const ee=function(t){return["/patient","appointments","view",t]};function ne(t,e){if(1&t&&(a.Tb(0,"td",36),a.Tb(1,"button",37),a.Dc(2,"View "),a.Sb(),a.Bc(3,te,2,1,"a",38),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.kc("routerLink",a.oc(2,ee,t.id)),a.Bb(2),a.kc("ngIf",t.mealPlan)}}function ie(t,e){1&t&&a.Ob(0,"tr",40)}function oe(t,e){1&t&&a.Ob(0,"tr",41)}let ae=(()=>{class t{constructor(t,e,n,i,o){this.patientService=t,this.rndService=e,this.route=n,this.appointmentService=i,this.authService=o,this.selected="active",this.displayedColumns=["schedule","appointmentType","paymentMethod","amountDue","status","rnd","updatedAt","buttons"],this.resultsLength=0,this.isLoadingResults=!0,this.moment=p}update(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(Ft.a)(this.sort.sortChange,this.paginator.page).pipe(Object(At.a)({}),Object(It.a)(()=>(this.isLoadingResults=!0,"archived"===this.selected?this.appointmentService.getArchivedAppointmentsByPatient(this.authService.currentUserValue.id):this.appointmentService.getActiveAppointmentsByPatient(this.authService.currentUserValue.id))),Object(Pt.a)(t=>{this.isLoadingResults=!1,this.resultsLength=t.length,console.log("Results length",this.resultsLength);const e=t;for(const n of e)switch(n.createdAt=p(n.createdAt).format("LLL"),n.updatedAt=p(n.updatedAt).format("LLL"),n.appointmentType){case"nutrition_counseling":n.appointmentType="Nutrition Counseling";break;case"one_week_cycle_menu":n.appointmentType="One Week Cycle Menu";break;case"both":n.appointmentType="Nutrition Counseling & One Week Cycle Menu"}return e}),Object(Lt.a)(()=>(this.isLoadingResults=!1,Object(Ot.a)([])))).subscribe(t=>this.data=t)}ngAfterViewInit(){this.route.snapshot.paramMap.get("optional")&&(this.selected="archived"),this.update()}valueChange(t){this.update()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(m.a),a.Nb(Ut.a),a.Nb(c.a),a.Nb(u.a),a.Nb(r.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-appointments"]],viewQuery:function(t,e){if(1&t&&(a.Ic(E.a,!0),a.Ic(Nt.a,!0)),2&t){let t;a.qc(t=a.bc())&&(e.paginator=t.first),a.qc(t=a.bc())&&(e.sort=t.first)}},decls:47,vars:7,consts:[[1,"bg-white","shadow-sm"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],["routerLink","/patient/book-an-appointment","mat-raised-button","","color","accent",1,"mb-4"],[1,"w-full"],["appearance","outline",1,"font-sans","rounded-md","text-base"],[1,"text-base","font-sans",3,"value","valueChange"],["value","archived",1,"font-sans"],["value","active",1,"font-sans"],[1,"text-lg","font-medium","pb-2"],[1,"table","w-full","m-0","border","p-2","rounded-md","font-sans","text-base","mb-4"],["mat-table","","multiTemplateDataRows","","matSort","","matSortActive","updatedAt","matSortDisableClear","","matSortDirection","desc",1,"w-full","m-0",3,"dataSource"],["matColumnDef","schedule"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","font-sans text-sm",4,"matCellDef"],["matColumnDef","appointmentType"],["mat-cell","","class","font-sans font-medium text-sm",4,"matCellDef"],["matColumnDef","paymentMethod"],["mat-cell","","class","font-sans font-bold text-sm",4,"matCellDef"],["matColumnDef","amountDue"],["matColumnDef","status"],["mat-cell","","class","font-sans text-sm",3,"ngClass",4,"matCellDef"],["matColumnDef","rnd"],["matColumnDef","updatedAt"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","buttons"],["mat-cell","","class","font-sans",4,"matCellDef"],["mat-header-row","","class","text-base",4,"matHeaderRowDef"],["mat-row","","class","text-base",4,"matRowDef","matRowDefColumns"],[1,"font-sans",3,"length","pageSize"],["mat-header-cell",""],["mat-cell","",1,"font-sans","text-sm"],["mat-cell","",1,"font-sans","font-medium","text-sm"],["mat-cell","",1,"font-sans","font-bold","text-sm"],["mat-cell","",1,"font-sans","text-sm",3,"ngClass"],["mat-header-cell","","mat-sort-header","","disableClear",""],["mat-cell","",1,"font-sans"],[1,"font-bold","bg-blue-50","p-2","rounded-sm",3,"routerLink"],["class","font-bold bg-blue-50 p-2 ml-2 rounded-sm",3,"href",4,"ngIf"],[1,"font-bold","bg-blue-50","p-2","ml-2","rounded-sm",3,"href"],["mat-header-row","",1,"text-base"],["mat-row","",1,"text-base"]],template:function(t,e){1&t&&(a.Tb(0,"header",0),a.Tb(1,"div",1),a.Tb(2,"h1",2),a.Dc(3," Appointments "),a.Sb(),a.Sb(),a.Sb(),a.Tb(4,"div",1),a.Tb(5,"button",3),a.Dc(6,"Book an Appointment"),a.Sb(),a.Tb(7,"div",4),a.Tb(8,"mat-form-field",5),a.Tb(9,"mat-label"),a.Dc(10,"Select"),a.Sb(),a.Tb(11,"mat-select",6),a.ac("valueChange",function(t){return e.selected=t})("valueChange",function(t){return e.valueChange(t)}),a.Tb(12,"mat-option",7),a.Dc(13," Archived "),a.Sb(),a.Tb(14,"mat-option",8),a.Dc(15," Active "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(16,"h1",9),a.Dc(17),a.Sb(),a.Tb(18,"div",10),a.Tb(19,"table",11),a.Rb(20,12),a.Bc(21,jt,2,0,"th",13),a.Bc(22,Ht,2,1,"td",14),a.Qb(),a.Rb(23,15),a.Bc(24,qt,2,0,"th",13),a.Bc(25,Et,2,1,"td",16),a.Qb(),a.Rb(26,17),a.Bc(27,Vt,2,0,"th",13),a.Bc(28,$t,2,1,"td",18),a.Qb(),a.Rb(29,19),a.Bc(30,Gt,2,0,"th",13),a.Bc(31,_t,2,1,"td",16),a.Qb(),a.Rb(32,20),a.Bc(33,Qt,2,0,"th",13),a.Bc(34,zt,2,5,"td",21),a.Qb(),a.Rb(35,22),a.Bc(36,Kt,2,0,"th",13),a.Bc(37,Yt,2,1,"td",18),a.Qb(),a.Rb(38,23),a.Bc(39,Jt,2,0,"th",24),a.Bc(40,Xt,2,1,"td",14),a.Qb(),a.Rb(41,25),a.Bc(42,Zt,1,0,"th",13),a.Bc(43,ne,4,4,"td",26),a.Qb(),a.Bc(44,ie,1,0,"tr",27),a.Bc(45,oe,1,0,"tr",28),a.Sb(),a.Ob(46,"mat-paginator",29),a.Sb(),a.Sb()),2&t&&(a.Bb(11),a.kc("value",e.selected),a.Bb(6),a.Fc(" Showing all ",e.selected.toLowerCase()," appointment(s)"),a.Bb(2),a.kc("dataSource",e.data),a.Bb(25),a.kc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.kc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.kc("length",e.resultsLength)("pageSize",30))},directives:[N.a,c.d,B.b,B.f,R.a,M.m,q.j,Nt.a,q.c,q.e,q.b,q.g,q.i,E.a,q.d,q.a,i.j,Nt.b,i.l,q.f,q.h],styles:[".mat-header-cell[_ngcontent-%COMP%]{font-size:.975rem;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}"]}),t})();function se(t,e){1&t&&(a.Tb(0,"h1",25),a.Dc(1," Proof of payment "),a.Sb())}function re(t,e){if(1&t&&a.Ob(0,"img",29),2&t){const t=a.ec().$implicit,e=a.ec();a.lc("src",e.environment.apiUrl+"/file/files/"+(null==t?null:t.path),a.uc)}}function ce(t,e){if(1&t&&(a.Ob(0,"img",30),a.Tb(1,"p",31),a.Dc(2),a.Sb()),2&t){const t=a.ec().$implicit;a.Bb(2),a.Fc("",t.path," ")}}function le(t,e){if(1&t&&(a.Tb(0,"div"),a.Tb(1,"a",26),a.Bc(2,re,1,1,"img",27),a.Sb(),a.Bc(3,ce,3,1,"ng-template",null,28,a.Cc),a.Sb()),2&t){const t=e.$implicit,n=a.rc(4),i=a.ec();a.Bb(1),a.lc("href",i.environment.apiUrl+"/file/files/"+(null==t?null:t.path),a.uc),a.Bb(1),a.kc("ngIf","pdf"!==t.path.split(".")[1])("ngIfElse",n)}}function be(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",33),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Dc(5," Bank of the Philippine Islands "),a.Sb(),a.Tb(6,"p",35),a.Dc(7," Branch: Lipa Poblacion, Lipa City Batangas"),a.Sb(),a.Tb(8,"p",35),a.Dc(9," Account Number: "),a.Tb(10,"span",36),a.Dc(11,"9011-0017-15"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Dc(13," Account Type: Current Account"),a.Sb(),a.Tb(14,"p",35),a.Dc(15," Swift Code: BOPIPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function de(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",37),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Dc(5," Metropolitan Bank & Trust Company"),a.Sb(),a.Tb(6,"p",35),a.Dc(7," Branch: B. Morada Lipa City, Barangas"),a.Sb(),a.Tb(8,"p",35),a.Dc(9," Account Number: "),a.Tb(10,"span",36),a.Dc(11,"145-3-14503985-2"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Dc(13," Account Type: Savings Account"),a.Sb(),a.Tb(14,"p",35),a.Dc(15," Swift Code: MBTCPHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function me(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Ob(2,"img",38),a.Tb(3,"div",6),a.Tb(4,"h1",34),a.Dc(5," Union Bank "),a.Sb(),a.Tb(6,"p",35),a.Dc(7," Branch: Lipa Branch, Lipa City Batangas"),a.Sb(),a.Tb(8,"p",35),a.Dc(9," Account Number: "),a.Tb(10,"span",36),a.Dc(11,"002660003598"),a.Sb(),a.Sb(),a.Tb(12,"p",35),a.Dc(13," Account Type: Savings Account"),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function pe(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Tb(2,"div",39),a.Ob(3,"img",40),a.Sb(),a.Tb(4,"div",6),a.Tb(5,"h1",34),a.Dc(6," Banco De Oro"),a.Sb(),a.Tb(7,"p",35),a.Dc(8," Branch: Ayala Highway, Lipa City Batangas"),a.Sb(),a.Tb(9,"p",35),a.Dc(10," Account Number: "),a.Tb(11,"span",36),a.Dc(12,"1880141440"),a.Sb(),a.Sb(),a.Tb(13,"p",35),a.Dc(14," Account Type: Savings Account"),a.Sb(),a.Tb(15,"p",35),a.Dc(16," Swift Code: BNORTHMM "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function ue(t,e){1&t&&(a.Tb(0,"div"),a.Tb(1,"div",32),a.Tb(2,"div",6),a.Tb(3,"h1",34),a.Dc(4," On Site Payment "),a.Sb(),a.Tb(5,"p",35),a.Dc(6," Proceed to the Weight Management Center for encoding and payment instructions. "),a.Sb(),a.Tb(7,"p",35),a.Dc(8," We are open from "),a.Tb(9,"span",41),a.Dc(10," 6 AM - 6 PM "),a.Sb(),a.Dc(11,"everyday "),a.Sb(),a.Sb(),a.Sb(),a.Sb())}function he(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",42),a.ac("click",function(){return a.tc(t),a.ec(),a.rc(56).click()}),a.Dc(1),a.Sb()}if(2&t){const t=a.ec();a.kc("disabled",t.isUploading&&t.uploadedFilePaths.length===t.filesToUpload),a.Bb(1),a.Fc("",t.isUploading?"Attaching files...":"Attach proof of payment"," ")}}let fe=(()=>{class t{constructor(t,e,n,i){this.route=t,this.appointmentService=e,this.fileService=n,this.snackBar=i,this.isUploading=!1,this.progress=0,this.message="",this.uploadedFilePaths=[],this.filesToUpload=0,this.doneUploaded=0,this.moment=p,this.environment=x.a}fetchCurrentAppointment(t){this.appointmentService.getAppointmentById(t).subscribe(t=>{this.appointment=t,console.log(this.appointment)},t=>{alert(t)})}ngOnInit(){const t=parseInt(this.route.snapshot.paramMap.get("id"));this.fetchCurrentAppointment(t)}doneCallback(){if(this.doneUploaded++,this.doneUploaded===this.filesToUpload){console.log("Done! uploading "+this.filesToUpload+" files");for(const t of this.uploadedFilePaths)this.appointment.proofOfPayments.push({id:0,path:t.path});this.isUploading=!1,console.log("sending.",this.appointment),this.appointment.patient.roles=void 0,this.appointmentService.addProofOfPayment(this.appointment.id,this.appointment).subscribe(t=>{t&&this.snackBar.open("Success!",void 0,{duration:3e3})},t=>{console.log(t),this.snackBar.open("Error",void 0,{duration:3e3})})}}uploadFile(t){if(console.log("upload files is called"),this.isUploading=!0,console.log(t),0!==t.length){this.filesToUpload=t.length,console.log("files to upload",this.filesToUpload);const e=new FormData;e.append("file",t[0],w.a()+"."+t[0].type.split("/")[1]),this.fileService.upload(e).subscribe(t=>{t.type===y.d.UploadProgress?this.progress=Math.round(100*t.loaded/t.total):t.type===y.d.Response&&(this.message="Upload success.",this.uploadedFilePaths.push({path:t.body.path}),console.log(this.uploadedFilePaths),this.doneCallback())})}}fileChange(t){this.uploadFile(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(c.a),a.Nb(u.a),a.Nb(D.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-view-appointment"]],decls:57,vars:17,consts:[[1,"bg-white","shadow-sm"],[1,"container","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],["routerLink","/patient/appointments"],[1,"text-gray-500"],[1,"content","border","p-4","rounded-md","flex","flex-row","w-2/3"],[1,"info"],[1,"text-2xl","font-medium","text-gray-600","mb-4"],[1,"text-base","text-gray-700","bg-gray-100","p-4","mt-4","rounded-sm"],[1,"pl-4","font-bold"],[1,"text-base","text-gray-600","mt-6"],[1,"pl-4","font-bold","text-gray-900"],[1,"text-base","text-gray-600"],[1,"pl-4","text-gray-900","font-medium"],["class","text-base font-medium my-4",4,"ngIf"],[1,"grid","grid-cols-3","gap-1"],[4,"ngFor","ngForOf"],[1,"payment-instructions","mt-4"],[1,"text-base","font-medium"],[1,"my-2",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"controls","ml-auto","flex","flex-row","h-12"],["type","button","mat-raised-button","","class","button mt-2 w-72 flex flex-col","color","white",3,"disabled","click",4,"ngIf"],["type","file","accept",".png,.jpg,.jpeg,.pdf","placeholder","Choose file",2,"display","none",3,"change"],["file",""],[1,"text-base","font-medium","my-4"],[3,"href"],["alt","","class","mt-2 w-44 h-44 shadow-lg border rounded-lg object-cover",3,"src",4,"ngIf","ngIfElse"],["elseBlk",""],["alt","",1,"mt-2","w-44","h-44","shadow-lg","border","rounded-lg","object-cover",3,"src"],["src","/assets/pdf.png","alt","",1,"w-12","h-12","mt-4"],[1,"text-sm","font-medium","text-gray-700","pt-2"],[1,"flex","flex-row"],["src","/assets/bpi.png","alt","",1,"h-12","mr-6"],[1,"text-lg","font-medium","text-gray-800"],[1,"text-base","text-gray-700"],[1,"font-bold","primary"],["src","/assets/metro.png","alt","",1,"h-12","mr-6"],["src","/assets/unionbank.png","alt","",1,"h-12","mr-6"],[1,"image","min-w-lg","max-w-lg"],["src","/assets/bdo.png","alt","",1,"h-14","mr-6"],[1,"font-bold"],["type","button","mat-raised-button","","color","white",1,"button","mt-2","w-72","flex","flex-col",3,"disabled","click"]],template:function(t,e){if(1&t){const t=a.Ub();a.Tb(0,"header",0),a.Tb(1,"div",1),a.Tb(2,"h1",2),a.Tb(3,"a",3),a.Dc(4,"Appointments "),a.Sb(),a.Tb(5,"span",4),a.Dc(6,"/ View Appointment "),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(7,"div",1),a.Tb(8,"div",5),a.Tb(9,"div",6),a.Tb(10,"h1",7),a.Dc(11," Appointment Details "),a.Sb(),a.Tb(12,"div",8),a.Tb(13,"p"),a.Dc(14," Schedule: "),a.Tb(15,"span",9),a.Dc(16),a.Sb(),a.Sb(),a.Tb(17,"p"),a.Dc(18," Status:\xa0\xa0\xa0\xa0\xa0 "),a.Tb(19,"span",9),a.Dc(20),a.Sb(),a.Sb(),a.Sb(),a.Tb(21,"p",10),a.Dc(22," Patient: "),a.Tb(23,"span",11),a.Dc(24),a.Sb(),a.Sb(),a.Tb(25,"p",12),a.Dc(26," Assigned RND: "),a.Tb(27,"span",13),a.Dc(28),a.Sb(),a.Sb(),a.Tb(29,"p",12),a.Dc(30," Created At: "),a.Tb(31,"span",13),a.Dc(32),a.Sb(),a.Sb(),a.Tb(33,"p",12),a.Dc(34," Payment Method: "),a.Tb(35,"span",13),a.Dc(36),a.Sb(),a.Sb(),a.Tb(37,"p",12),a.Dc(38," Amount Due: "),a.Tb(39,"span",13),a.Dc(40),a.Sb(),a.Sb(),a.Bc(41,se,2,0,"h1",14),a.Tb(42,"div",15),a.Bc(43,le,5,3,"div",16),a.Sb(),a.Tb(44,"div",17),a.Tb(45,"p",18),a.Dc(46," Payment Instructions "),a.Sb(),a.Tb(47,"div",19),a.Bc(48,be,16,0,"div",20),a.Bc(49,de,16,0,"div",20),a.Bc(50,me,14,0,"div",20),a.Bc(51,pe,17,0,"div",20),a.Bc(52,ue,12,0,"div",20),a.Sb(),a.Sb(),a.Sb(),a.Tb(53,"div",21),a.Bc(54,he,2,2,"button",22),a.Tb(55,"input",23,24),a.ac("change",function(){a.tc(t);const n=a.rc(56);return e.fileChange(n.files)}),a.Sb(),a.Sb(),a.Sb(),a.Sb()}2&t&&(a.Bb(16),a.Fc(" ",e.moment(null==e.appointment?null:e.appointment.schedule).format("LLL"),""),a.Bb(4),a.Fc(" ",null==e.appointment?null:e.appointment.status,""),a.Bb(4),a.Gc(" ",null==e.appointment?null:e.appointment.patient.lastName," , ",null==e.appointment?null:e.appointment.patient.firstName,""),a.Bb(4),a.Fc(" ",null!=e.appointment&&e.appointment.rnd?(null==e.appointment?null:e.appointment.rnd.firstName)+" "+(null==e.appointment?null:e.appointment.rnd.lastName):"Pending..."," "),a.Bb(4),a.Fc(" ",e.moment(null==e.appointment?null:e.appointment.createdAt).format("L"),""),a.Bb(4),a.Fc(" ",null==e.appointment?null:e.appointment.paymentMethod.toUpperCase(),""),a.Bb(4),a.Fc(" ",0===(null==e.appointment?null:e.appointment.amountDue)?"TBD":null==e.appointment?null:e.appointment.amountDue,""),a.Bb(1),a.kc("ngIf",(null==e.appointment?null:e.appointment.proofOfPayments.length)>0),a.Bb(2),a.kc("ngForOf",null==e.appointment?null:e.appointment.proofOfPayments),a.Bb(4),a.kc("ngSwitch",null==e.appointment?null:e.appointment.paymentMethod),a.Bb(1),a.kc("ngSwitchCase","bpi"),a.Bb(1),a.kc("ngSwitchCase","metro"),a.Bb(1),a.kc("ngSwitchCase","union"),a.Bb(1),a.kc("ngSwitchCase","bdo"),a.Bb(1),a.kc("ngSwitchCase","on_site"),a.Bb(2),a.kc("ngIf","PENDING_PAYMENT"===(null==e.appointment?null:e.appointment.status)))},directives:[c.e,i.l,i.k,i.n,i.o,N.a],styles:[""]}),t})();var ge=n("pjjj"),Se=n("acRR");const ve=["scrollMe"];function Te(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",11),a.ac("click",function(){a.tc(t);const e=a.ec().$implicit;return a.ec().selectRND(e.rnd)}),a.Tb(1,"div",12),a.Tb(2,"div",13),a.Ob(3,"img",14),a.Sb(),a.Tb(4,"div",15),a.Tb(5,"h1",16),a.Dc(6),a.Sb(),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.ec().$implicit;a.Bb(3),a.lc("src",t.rnd.profileImageURL||"/assets/default.png",a.uc),a.Bb(3),a.Gc(" ",t.rnd.firstName," ",t.rnd.lastName," ")}}function ye(t,e){if(1&t&&(a.Rb(0),a.Bc(1,Te,7,3,"div",10),a.Qb()),2&t){const t=e.$implicit;a.Bb(1),a.kc("ngIf",t.rnd)}}function xe(t,e){if(1&t&&(a.Tb(0,"span"),a.Dc(1),a.Sb()),2&t){const t=a.ec().$implicit;a.Bb(1),a.Fc(" ",t.word,"")}}function we(t,e){if(1&t&&(a.Tb(0,"a",32),a.Dc(1),a.Sb()),2&t){const t=a.ec().$implicit;a.lc("href",t.word,a.uc),a.Bb(1),a.Fc(" ",t.word,"")}}function De(t,e){if(1&t&&(a.Rb(0),a.Bc(1,xe,2,1,"span",30),a.Bc(2,we,2,2,"ng-template",null,31,a.Cc),a.Qb()),2&t){const t=e.$implicit,n=a.rc(3);a.Bb(1),a.kc("ngIf",!t.isLink)("ngIfElse",n)}}const Be=function(t,e){return{"self-start bg-white text-gray-900":t,"self-end bg-accent text-white":e}};function ke(t,e){if(1&t&&(a.Tb(0,"div",27),a.Tb(1,"p",28),a.Bc(2,De,4,2,"ng-container",7),a.Sb(),a.Tb(3,"p",29),a.Dc(4),a.Sb(),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.kc("ngClass",a.pc(3,Be,"rnd"===t.sender,"patient"===t.sender)),a.Bb(2),a.kc("ngForOf",t.words),a.Bb(2),a.Fc("",n.moment(t.createdAt).fromNow()," ")}}function Ce(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",17),a.Tb(1,"div",18),a.Tb(2,"h1",16),a.Dc(3),a.Sb(),a.Sb(),a.Tb(4,"div",19,20),a.Bc(6,ke,5,6,"div",21),a.Sb(),a.Tb(7,"div",22),a.Tb(8,"h1",16),a.Dc(9," Send Message"),a.Sb(),a.Tb(10,"mat-form-field",23),a.Tb(11,"mat-label",24),a.Dc(12,"Message"),a.Sb(),a.Tb(13,"textarea",25),a.ac("ngModelChange",function(e){return a.tc(t),a.ec().message=e}),a.Sb(),a.Sb(),a.Tb(14,"button",26),a.ac("click",function(){return a.tc(t),a.ec().sendMessage()}),a.Dc(15," Send "),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=a.ec();a.Bb(3),a.Gc(" ",t.selectedRND.firstName," ",t.selectedRND.lastName," "),a.Bb(3),a.kc("ngForOf",t.messages),a.Bb(7),a.kc("ngModel",t.message),a.Bb(1),a.kc("disabled",!t.message)}}const Re=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"",component:b,children:[{path:"dashboard",component:v,pathMatch:"full"},{path:"appointments",component:ae,pathMatch:"full"},{path:"appointments/:optional",component:ae,pathMatch:"full"},{path:"appointments/view/:id",component:fe,pathMatch:"full"},{path:"account-settings",component:Mt,pathMatch:"full"},{path:"medical-records",component:L,pathMatch:"full"},{path:"support",component:H,pathMatch:"full"},{path:"history",component:Z,pathMatch:"full"},{path:"messages",component:(()=>{class t{constructor(t,e,n,i){this.authService=t,this.messageService=e,this.patientService=n,this.snackBar=i,this.isSendingMessage=!1,this.moment=p,this.patientService.getPatient(this.authService.currentUserValue.username).subscribe(t=>{t&&(this.appointments=t.appointments,this.scrollToBottom())})}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight+100}catch(t){}}updateMessage(t){t.messageService.fetchMessages("patient",t.selectedRND.id,t.authService.currentUserValue.id).subscribe(e=>{t.messages?t.messages.length!==e.length?(t.messages=e,t.parseMessages()):t.parseMessages():(t.messages=e,t.parseMessages())},e=>{t.snackBar.open("Error",void 0,{duration:3e3})})}startInterval(){const t=this;this.intervalRef=setInterval(()=>{t.updateMessage(t)},500)}parseMessages(){const t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/gi;for(const e of this.messages){const n=e.message.split(" ");e.words=[];for(let i of n)i=i.trim(),i.match(t)?e.words.push({word:i,isLink:!0}):e.words.push({word:i,isLink:!1})}}ngOnInit(){}selectRND(t){this.selectedRND=t,this.updateMessage(this),this.startInterval(),this.scrollToBottom()}sendMessage(){this.isSendingMessage=!0;const t=new ge.a;t.message=this.message,t.rndId=this.selectedRND.id,t.patientId=this.authService.currentUserValue.id,t.sender="patient",this.messageService.sendMessage(t).subscribe(t=>{t&&(this.updateMessage(this),this.message=null)},t=>{this.snackBar.open("Error sending message",void 0,{duration:3e3})})}ngOnDestroy(){clearInterval(this.intervalRef)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(Se.a),a.Nb(m.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-messages"]],viewQuery:function(t,e){if(1&t&&a.Ic(ve,!0),2&t){let t;a.qc(t=a.bc())&&(e.myScrollContainer=t.first)}},decls:14,vars:2,consts:[[1,"flex","flex-row","container","mx-auto","px-4","sm:px-6","lg:px-8","items-start","computed-dashboard-div"],[1,"col-1","py-6","w-3/4"],[1,"bg-white"],[1,"text-2xl","font-medium","leading-tight","text-gray-900"],[1,"flex","flex-row","mt-4","pr-8"],[1,"threads","flex","flex-col","overflow-y-auto","mr-4","pr-2","w-1/3","max-h-96"],[1,"text-sm","font-medium","text-gray-600"],[4,"ngFor","ngForOf"],["class","conversation px-4 py-2 bg-dirty w-2/3 flex flex-col rounded-sm",4,"ngIf"],["routerLink","/patient/account-settings",1,"col-2","w-1/4","p-6","border","rounded","shadow-sm","m-6","cursor-pointer","hover:shadow-md","outline-none"],["class","my-2 flex flex-col border py-2 px-4 rounded-md cursor-pointer hover:shadow-lg",3,"click",4,"ngIf"],[1,"my-2","flex","flex-col","border","py-2","px-4","rounded-md","cursor-pointer","hover:shadow-lg",3,"click"],[1,"patients","flex","flex-row"],[1,"row","flex","flex-col","justify-center"],["alt","",1,"w-14","h-14","border","rounded-full","object-cover",3,"src"],[1,"texts","flex","flex-col","align-middle","justify-center","mx-4"],[1,"text-base","font-medium"],[1,"conversation","px-4","py-2","bg-dirty","w-2/3","flex","flex-col","rounded-sm"],[1,"header","border-b","pb-2"],[1,"thread","flex","flex-col","pt-4","flex-grow","overflow-y-scroll","max-h-96"],["scrollMe",""],["class","message rounded-md py-2 px-4 my-1 max-w-max break-all",3,"ngClass",4,"ngFor","ngForOf"],[1,"message-box","justify-self-end","justify-end","flex","flex-col"],["appearance","outline",1,"mt-4"],[1,"font-sans","text-base"],["matInput","","rows","2",1,"font-sans","text-base",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button","","color","accent",1,"mb-6",3,"disabled","click"],[1,"message","rounded-md","py-2","px-4","my-1","max-w-max","break-all",3,"ngClass"],[1,"text-base"],[1,"text-xs"],[4,"ngIf","ngIfElse"],["elseBlk",""],["target","_blank",1,"text-gray-400","underline",3,"href"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"header",2),a.Tb(3,"div"),a.Tb(4,"h1",3),a.Dc(5," Messages "),a.Sb(),a.Sb(),a.Sb(),a.Tb(6,"div",4),a.Tb(7,"div",5),a.Tb(8,"p",6),a.Dc(9," You can message assigned RND here "),a.Sb(),a.Bc(10,ye,2,1,"ng-container",7),a.Sb(),a.Bc(11,Ce,16,5,"div",8),a.Sb(),a.Sb(),a.Tb(12,"div",9),a.Ob(13,"app-user-card"),a.Sb(),a.Sb()),2&t&&(a.Bb(10),a.kc("ngForOf",e.appointments),a.Bb(1),a.kc("ngIf",e.selectedRND))},directives:[i.k,i.l,c.d,S,B.b,B.f,k.b,T.c,T.q,T.t,N.a,i.j],styles:[""]}),t})(),pathMatch:"full"},{path:"book-an-appointment",component:Tt,pathMatch:"full"},{path:"nutrition-tools",component:kt,pathMatch:"full"}]}];let Me=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[[c.f.forChild(Re)],i.c],c.f]}),t})();var Ne=n("RTfJ");let Fe=(()=>{class t{}return t.\u0275mod=a.Lb({type:t,bootstrap:[b]}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[i.c,c.f,Me,N.b,E.b,q.l,B.d,k.c,T.v,et.c,C.c,M.n,R.b,d.b,Ne.a,Nt.c,T.k]]}),t})()}}]);